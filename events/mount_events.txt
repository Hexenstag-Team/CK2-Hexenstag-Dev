####ID Ranges####
#Market 0-99
#Decision Events 100-199
#Character flavor 200-299
#Province flavor 300-399
namespace = mountshop
#####################Market Window#####################
##choose type
character_event = {
	id = mountshop.10
	title = EVTTITLEmountshop.10
	desc = EVTDESAmountshop.10
	picture = GFX_evt_market

	is_triggered_only = yes

	#Mounts
	option = {
		name = EVTOPTAmountshop.10
		trigger = {
			can_buy_greenskin_items_trigger=no
			NOR={
				trait=creature_skaven
				trait=creature_ogre
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
		}
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
	#Skaven
	option = {
		name = EVTOPTGmountshop.20
		trigger = {
			trait=creature_skaven
		}
		hidden_tooltip = { character_event = { id = mountshop.12 } }
	}
	#OGRE
	option = {
		name = EVTOPTLAmountshop.20
		trigger = {
			trait=creature_ogre
		}
		hidden_tooltip = { character_event = { id = mountshop.13 } }
	}
	#Lizardmen Offensive
	option = {
		name = EVTOPTLBmountshop.20
		trigger = {
			OR={
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
		}
		hidden_tooltip = { character_event = { id = mountshop.14 } }
	}
	#Lizardmen Defensive
	option = {
		name = EVTOPTGmountshop.20
		trigger = {
			OR={
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
		}
		hidden_tooltip = { character_event = { id = mountshop.28 } }
	}
	#Greenskin
	option = {
		name = EVTOPTGmountshop.20
		trigger = {
			can_buy_greenskin_items_trigger=yes
		}
		hidden_tooltip = { character_event = { id = mountshop.15 } }
	}
	#exit
	option = {
		name = EVTOPTEXIT
		hidden_tooltip = { clr_character_flag = visiting_mount_market }
	}
}
###Skaven market
character_event = {
	id = mountshop.11
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.11
	picture = GFX_evt_warpstone_market

	is_triggered_only = yes

	option = {
		name = EVTOPTSPmountshop.11
		scaled_wealth = { value = -0.15 min=-50 max = -200 }
		piety=-100
		add_artifact = giant_rat_mount
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	option = {
		name = EVTOPTSmountshop.11
		scaled_wealth = { value = -2.15 min=-50 max = -300 }
		add_artifact = brood_horror_mount
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	option = {
		name = EVTOPTWmountshop.11

		add_artifact = rat_ogre_mount
		if={limit={culture=moulder}
		scaled_wealth = { value = -3.15 min=-600 max = -1200}
		}
		else={scaled_wealth = { value = -3.15 min=-800 max = -1200 }
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
		}
	}
	#back
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.12 } }
	}
}

character_event = {
	id = mountshop.12
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.12
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes


	#Standard
	option = {
		name = EVTOPTAmountshop.12
		hidden_tooltip = { character_event = { id = mountshop.11 } }
	}
	option = {
		name = EVTOPTBmountshop.12
		prestige=-250
		scaled_wealth = { value = -4.5 min = -1200 max = -3000 }
		add_artifact=doomwheel_mount
	}
	#Doomflayer
	option = {
		name = EVTOPTCmountshop.12
		prestige=-250
		scaled_wealth = { value = -4.5 min = -900 max = -2000 }
		add_artifact=doomflayer_mount
	}
	#back to mount types
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}

###Ogre market
character_event = {
	id = mountshop.13
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.15
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes
	option = {
		name = EVTOPTSmountshop.13
		scaled_wealth = { value = -2.86 min=-400 max = -1200}
		add_artifact = Mournfang
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	option = {
		name = EVTOPTWmountshop.13

		add_artifact = Stonehorn
		scaled_wealth = { value = -3.15 min=-600 max = -1200}
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#back
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}
###Lizardmen Market
character_event = {
	id = mountshop.14
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.14
	picture = GFX_evt_lizardmen_coatl

	is_triggered_only = yes
	option = {
		name = EVTOPTAmountshop.14
		scaled_wealth = { value = -4.86 min=-650 max = -3000}
		add_artifact = carnosaur_mount
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	option = {
		name = EVTOPTBmountshop.14

		add_artifact = ripperdactyl_mount
		scaled_wealth = { value = -2.8 min=-300 max = -1200}
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#back
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}
character_event = {
	id = mountshop.28
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.14
	picture = GFX_evt_lizardmen_coatl

	is_triggered_only = yes
	option = {
		name = EVTOPTAmountshop.28
		scaled_wealth = { value = -3.6 min=-500 max = -1200}
		add_artifact = stegadon_mount
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	option = {
		name = EVTOPTBmountshop.28

		add_artifact = bastiladon_mount
		scaled_wealth = { value = -3.15 min=-450 max = -1200}
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#back
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}
######Horses######
character_event = {
	id = mountshop.15
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.15
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes


	#Standard
	option = {
		name = EVTOPTAmountshop.15
		hidden_tooltip = { character_event = { id = mountshop.16 } }
	}
	#Boar Chariot
	option = {
		name = EVTOPTBmountshop.15
		trigger={any_artifact={artifact_type = boar}}
		prestige=-250
		scaled_wealth = { value = -3.5 min = -100 max = -750 }
		remove_artifact=boar
		add_artifact=boar_chariot
	}
	#back to mount types
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}

###Greenskin market
character_event = {
	id = mountshop.16
	title = EVTTITLEmountshop.16
	desc = EVTDESAmountshop.16
	picture = GFX_evt_greenskinhuts

	is_triggered_only = yes

	#Spider
	option = {
		trigger={religion=spider_god}
		name = EVTOPTSPmountshop.16
		scaled_wealth = { value = -0.15 min=-50 max = -200 }
		piety=-100
		add_artifact = spider_mount
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#Squig
	option = {
		trigger={trait=creature_goblin}
		name = EVTOPTSmountshop.16
		scaled_wealth = { value = -0.15 min=-50 max = -200 }
		prestige=-100
		random_list={
			30={add_artifact = great_cave_squig}
			70={add_artifact = squig}
		}
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#Wolf
	option = {
		trigger={
			OR = {
				trait=creature_goblin
				trait=creature_hobgoblin
			}
		}
		name = EVTOPTWmountshop.16
		scaled_wealth = { value = -0.15 min=-80 max = -200 }
		add_artifact = wolf
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#Boar
	option = {
		trigger={
			NOR={
				trait=creature_goblin
				trait=creature_hobgoblin
			}
		}
		name = EVTOPTBmountshop.16
		scaled_wealth = { value = -0.35 min=-120 max = -500 }
		add_artifact = boar
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#back
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.15 } }
	}
}

##choose mount type
character_event = {
	id = mountshop.20
	title = EVTTITLEmountshop.20
	desc = EVTDESAmountshop.20
	picture = GFX_evt_market

	is_triggered_only = yes


	#horse
	option = {
		name = EVTOPTAmountshop.20
		trigger = {
			can_buy_greenskin_items_trigger=no
			NOR={
				trait=creature_skaven
				trait=creature_ogre
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
		}
		hidden_tooltip = { character_event = { id = mountshop.21 } }
	}

	#camels and elephants
	option = {
		trigger = {
			OR = {
				can_buy_arabyan_items_trigger = yes
				can_buy_ind_items_trigger = yes
			}
			can_buy_greenskin_items_trigger=no
			NOR={
				trait=creature_skaven
				trait=creature_ogre
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
		}
		name = EVTOPTBmountshop.20
		hidden_tooltip = { character_event = { id = mountshop.30 } }
	}

	#exotic
	option = {
		trigger = {
			AND = {
				OR = {
					can_buy_ind_items_trigger = yes
					can_buy_kislev_items_trigger = yes
					can_buy_asur_items_trigger = yes
					can_buy_griffon_items_trigger=yes
					trait=creature_amazon
				}
				can_buy_greenskin_items_trigger=no
			NOR={
				trait=creature_skaven
				trait=creature_ogre
				trait=creature_skink
				trait=creature_slann
				trait=creature_saurus
			}
			}
		}
		name = EVTOPTCmountshop.20
		hidden_tooltip = { character_event = { id = mountshop.40 } }
	}

	#back to artifact type
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.10 } }
	}
}

######Horses######
character_event = {
	id = mountshop.21
	title = EVTTITLEmountshop.21
	desc = EVTDESAmountshop.21
	picture = GFX_evt_market

	is_triggered_only = yes


	#tier 1+2
	option = {
		name = EVTOPTAmountshop.21
		hidden_tooltip = { character_event = { id = mountshop.22 } }
	}

	#tier 3
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTBmountshop.21
		hidden_tooltip = { character_event = { id = mountshop.24 } }
	}

	#tier 4+5
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTCmountshop.21
		hidden_tooltip = { character_event = { id = mountshop.25 } }
	}

	#back to mount types
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}

###tier 1+2 page 1
character_event = {
	id = mountshop.22
	title = EVTTITLEmountshop.22
	desc = EVTDESAmountshop.22
	picture = GFX_evt_market

	is_triggered_only = yes


	#Pony
	option = {
		trigger={trait=creature_halfling}
		name = EVTOPTHALFmountshop.22
		wealth = -25
		add_artifact = pony
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}
	#dray horse
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTAmountshop.22
		wealth = -25
		add_artifact = dray_horse
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}

	#rouncey
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTBmountshop.22
		wealth = -25
		add_artifact = rouncey
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}

	#next to p2
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTNEXT
		hidden_tooltip = { character_event = { id = mountshop.23 } }
	}

	#back to horse quality
	option = {
		trigger={NOT={trait=creature_halfling}}
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.21 } }
	}
}

##tier 1+2, page 2
character_event = {
	id = mountshop.23
	title = EVTTITLEmountshop.23
	desc = EVTDESAmountshop.23
	picture = GFX_evt_market

	is_triggered_only = yes

	#hobby
	option = {
		trigger = { can_buy_albion_items_trigger = yes }
		name = EVTOPTAmountshop.23
		wealth = -75
		add_artifact = hobby
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.23
			clr_character_flag = visiting_mount_market
		}
	}

	#jennet
	option = {
		trigger = { can_buy_estalian_items_trigger = yes }
		name = EVTOPTBmountshop.23
		wealth = -75
		add_artifact = jennet
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.23
			clr_character_flag = visiting_mount_market
		}
	}

	#palfry
	option = {
		name = EVTOPTCmountshop.23
		wealth = -75
		add_artifact = palfry
		new_artifact = { save_event_target_as = mount_bought_item }
		clr_character_flag = visiting_mount_market
	}

	#loop back to page 1
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = { character_event = { id = mountshop.22 } }
	}
}

##tier 3 page 1
character_event = {
	id = mountshop.24
	title = EVTTITLEmountshop.24
	desc = EVTDESAmountshop.24
	picture = GFX_evt_market

	is_triggered_only = yes

	#courser
	option = {
		name = EVTOPTAmountshop.24
		wealth = -150
		add_artifact = courser
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.24
			new_artifact = { save_event_target_as = mount_bought_item }
			clr_character_flag = visiting_mount_market
		}
	}

	#breton charger
	option = {
		trigger = { can_buy_breton_items_trigger = yes }
		name = EVTOPTBmountshop.24
		if = {
			limit = { breton_discount_trigger = yes }
			wealth = -150
		}
		else = { wealth = -240 }
		add_artifact = bretonnian_charger
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.27
			clr_character_flag = visiting_mount_market
		}
	}

	#destrier
	option = {
		name = EVTOPTBmountshop.24
		wealth = -200
		add_artifact = destrier
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.24
			new_artifact = { save_event_target_as = mount_bought_item }
			clr_character_flag = visiting_mount_market
		}
	}

	#galician horse
	option = {
		trigger = { can_buy_estalian_items_trigger = yes }
		name = EVTOPTCmountshop.24
		if = {
			limit = { estalian_discount_trigger = yes }
			wealth = -200
		}
		else = { wealth = -250 }
		add_artifact = irrana_mountain_horse
		custom_tooltip = {
			text = EVTTOOLTIPCmountshop.24
			clr_character_flag = visiting_mount_market
		}
	}

	#back to horse quality
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.21 } }
	}
}

##tier 4+5 page 1
character_event = {
	id = mountshop.25
	title = EVTTITLEmountshop.25
	desc = EVTDESAmountshop.25
	picture = GFX_evt_market

	is_triggered_only = yes

	option = {
		trigger = { culture_group = druchi_group }
		name = EVTOPTDmountshop.25
		wealth = -350
		prestige=-200
		add_artifact = druchii_destrier
		custom_tooltip = {
			text = EVTTOOLTIPDmountshop.25
			clr_character_flag = visiting_mount_market
		}
	}

	option = {
		trigger = { culture_group = druchi_group }
		name = EVTOPTCOmountshop.25
		wealth = -450
		prestige=-200
		add_artifact = cold_one_mount
		custom_tooltip = {
			text = EVTTOOLTIPCOmountshop.25
			clr_character_flag = visiting_mount_market
		}
	}
	#charger
	option = {
		trigger = { NOT={culture_group = druchi_group }}
		name = EVTOPTAmountshop.25
		wealth = -300
		if={limit={religion_group=chaos_gods_group}
		add_artifact=chaos_destrier
		}
		else={add_artifact = charger}
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.25
			new_artifact = { save_event_target_as = mount_bought_item }
			clr_character_flag = visiting_mount_market
		}
	}
	#steppe courser
	option = {
		trigger = {
			can_buy_steppes_items_trigger = yes
			NOT={culture_group = druchi_group }
		}
		name = EVTOPTBmountshop.25
		wealth = -300
		add_artifact = steppe_courser
		custom_tooltip = {
			clr_character_flag = visiting_mount_market
		}
	}

	#next to p2
	option = {
		name = EVTOPTNEXT
		trigger = {
			OR = {
				can_buy_asur_items_trigger = yes
				can_buy_steppes_items_trigger = yes
				can_buy_arabyan_items_trigger = yes
				can_buy_breton_items_trigger = yes
			}
		}
		hidden_tooltip = {
			#check for p2
			if = {
				limit = {
					OR = {
						can_buy_asur_items_trigger = yes
						can_buy_arabyan_items_trigger = yes
					}
				}
				character_event = { id = mountshop.26 }
			}
			#check for p3
			else = { character_event = { id = mountshop.27 } }
		}
	}

	#back to horse quality
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.21 } }
	}
}

#tier 4+5 page 2
character_event = {
	id = mountshop.26
	title = EVTTITLEmountshop.26
	desc = EVTDESAmountshop.26
	picture = GFX_evt_market

	is_triggered_only = yes

	#asur courser
	option = {
		trigger = { can_buy_asur_items_trigger = yes }
		name = EVTOPTAmountshop.26
		if = {
			limit = { araby_discount_trigger = yes }
			wealth = -350
		}
		else = { wealth = -450 }
		add_artifact = asur_courser
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.26
			clr_character_flag = visiting_mount_market
		}
	}

	#arabyan courser
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTBmountshop.26
		if = {
			limit = { arabyan_discount_trigger = yes }
			wealth = -350
		}
		else = { wealth = -450 }
		add_artifact = arabyan_courser
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.26
			clr_character_flag = visiting_mount_market
		}
	}

	#arabyan charger
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTCmountshop.26
		if = {
			limit = { arabyan_discount_trigger = yes }
			wealth = -450
		}
		else = { wealth = -650 }
		add_artifact = arabyan_charger
		custom_tooltip = {
			text = EVTTOOLTIPCmountshop.26
			clr_character_flag = visiting_mount_market
		}
	}

	#next or loop back to p1
	option = {
		name = EVTOPTNEXT

		hidden_tooltip = {
			#check for p3
			if = {
				limit = {
					OR = {
						can_buy_steppes_items_trigger = yes
						can_buy_breton_items_trigger = yes
						can_buy_arabyan_items_trigger = yes
					}
				}
				character_event = { id = mountshop.27 }
			}
			#back to p1
			else = { character_event = { id = mountshop.25 } }
		}
	}
}

#tier 4+5 p3
character_event = {
	id = mountshop.27
	title = EVTTITLEmountshop.27
	desc = EVTDESAmountshop.27
	picture = GFX_evt_market

	is_triggered_only = yes


	#tong steppe horse
	option = {
		trigger = { can_buy_steppes_items_trigger = yes }
		name = EVTOPTAmountshop.27
		if = {
			limit = { is_within_diplo_range = offmap_cathay }
			wealth = -400
		}
		else = { wealth = -600 }
		add_artifact = tong_steppe_horse
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.27
			clr_character_flag = visiting_mount_market
		}
	}
	option = {
		trigger = { can_buy_steppes_items_trigger = yes }
		name = EVTOPTWmountshop.27
		if = {
			limit = { culture_group = hung_group }
			wealth = -400
		}
		else = { wealth = -600 }
		add_artifact = chaos_wastes_war_horse
		custom_tooltip = {
			text = EVTTOOLTIPWmountshop.27
			clr_character_flag = visiting_mount_market
		}
	}
	#breton warhorse
	option = {
		trigger = { can_buy_breton_items_trigger = yes }
		name = EVTOPTBmountshop.27
		if = {
			limit = { breton_discount_trigger = yes }
			wealth = -400
		}
		else = { wealth = -600 }
		add_artifact = bretonnian_warhorse_mount
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.27
			clr_character_flag = visiting_mount_market
		}
	}

	#Teverian horse
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTCmountshop.27
		if = {
			limit = { cophic_discount_trigger = yes }
			wealth = -350
		}
		else = { wealth = -450 }
		add_artifact = teverian_horse
		custom_tooltip = {
			text = EVTTOOLTIPCmountshop.27
			clr_character_flag = visiting_mount_market
		}
	}

	#loop back to p1
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = { character_event = { id = mountshop.25 } }
	}
}
######Camels and Elephants######
character_event = {
	id = mountshop.30
	title = EVTTITLEmountshop.30
	desc = EVTDESAmountshop.30
	picture = GFX_evt_market

	is_triggered_only = yes

	#camels
	option = {
		trigger = {
			can_buy_arabyan_items_trigger = yes
		}
		name = EVTOPTAmountshop.30
		hidden_tooltip = { character_event = { id = mountshop.31 } }
	}

	#Elephants
	option = {
		trigger = {
			OR = {
				can_buy_ind_items_trigger = yes
				can_buy_arabyan_items_trigger = yes
			}
		}
		name = EVTOPTBmountshop.30
		hidden_tooltip = { character_event = { id = mountshop.32 } }
	}

	#back to mount types
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}

####Camels
character_event = {
	id = mountshop.31
	title = EVTTITLEmountshop.31
	desc = EVTDESAmountshop.31
	picture = GFX_evt_market

	is_triggered_only = yes

	#arabyan camel
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTAmountshop.31
		if = {
			limit = { arabyan_discount_trigger = yes }
			wealth = -250
		}
		else = { wealth = -300 }
		add_artifact = arabyan_camel
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.31
			clr_character_flag = visiting_mount_market
		}
	}

	#cophic camel
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTBmountshop.31
		wealth = -200
		add_artifact = cophic_camel
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.31
			clr_character_flag = visiting_mount_market
		}
	}

	#back to camels and elephants
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.30 } }
	}
}

###Elephants
character_event = {
	id = mountshop.32
	title = EVTTITLEmountshop.32
	desc = EVTDESAmountshop.32
	picture = GFX_evt_market

	is_triggered_only = yes

	#indn elephant
	option = {
		trigger = { can_buy_ind_items_trigger = yes }
		name = EVTOPTAmountshop.32
		wealth = -650
		add_artifact = ind_elephant
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.32
			clr_character_flag = visiting_mount_market
		}
	}

	#southlander elephant
	option = {
		trigger = { can_buy_arabyan_items_trigger = yes }
		name = EVTOPTBmountshop.32
		if = {
			limit = { southlander_discount_trigger = yes }
			wealth = -500
		}
		else = { wealth = -650 }
		add_artifact = southlander_elephant
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.32
			clr_character_flag = visiting_mount_market
		}
	}

	#back to camels and elephants
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.30 } }
	}
}
######Exotic Mounts######
character_event = {
	id = mountshop.40
	title = EVTTITLEmountshop.40
	desc = EVTDESAmountshop.40
	picture = GFX_evt_market

	is_triggered_only = yes

	#Lamassu
	option = {
		trigger = { religion=hashut }
		name = EVTOPTAmountshop.40
		scaled_wealth = { value = -2.5 min = -450 max = -750 }
		add_artifact = lamassu_mount
		custom_tooltip = {
			text = EVTTOOLTIPAmountshop.40
			clr_character_flag = visiting_mount_market
		}
	}
	#Imperial Gryphon
	option = {
		trigger={ can_buy_griffon_items_trigger = yes }
		name = EVTOPTGmountshop.40
		add_artifact = gryphon_mount
		scaled_wealth = { value = -2.5 min = -450 max = -750 }
		custom_tooltip = {
			text = EVTTOOLTIPGmountshop.40
			clr_character_flag = visiting_mount_market
		}
	}

	#Amazon tiger
	option = {
		trigger = {trait=creature_amazon}
		name = EVTOPTTmountshop.40
		wealth = -300
		add_artifact = boar
		clr_character_flag = visiting_mount_market
	}

	#next to p2
	option = {
		trigger = {
			OR = {
				can_buy_kislev_items_trigger = yes
				can_buy_asur_items_trigger = yes
			}
		}
		name = EVTOPTNEXT
		hidden_tooltip = { character_event = { id = mountshop.41 } }
	}

	#back to mount types
	option = {
		name = EVTOPTBACK
		hidden_tooltip = { character_event = { id = mountshop.20 } }
	}
}

#page2
character_event = {
	id = mountshop.41
	title = EVTTITLEmountshop.41
	desc = EVTDESAmountshop.41
	picture = GFX_evt_market

	is_triggered_only = yes

	#kislev bear
	option = {
		trigger = { can_buy_kislev_items_trigger = yes }
		name = EVTOPTBmountshop.41
		if = {
			limit = { kislevite_discount_trigger = yes }
			scaled_wealth = { value = -2.0 min = -250 max = -750 }
		}
		else = { scaled_wealth = { value = -2.5 min = -450 max = -750 } }
		add_artifact = war_bear_mount
		custom_tooltip = {
			text = EVTTOOLTIPBmountshop.41
			clr_character_flag = visiting_mount_market
		}
	}

	#Asrai Stag
	option = {
		trigger = { can_buy_asrai_items_trigger = yes }
		name = EVTOPTCmountshop.41
		if = {
			limit = { loren_discount_trigger = yes }
			scaled_wealth = { value = -3.0 min = -250 max = -750 }
		}
		else = { scaled_wealth = { value = -3.5 min = -450 max = -750 } }
		add_artifact = asrai_stag
		custom_tooltip = {
			text = EVTTOOLTIPCmountshop.41
			clr_character_flag = visiting_mount_market
		}
	}

	#loop back to p1
	option = {
		name = EVTOPTNEXT
		hidden_tooltip = { character_event = { id = mountshop.40 } }
	}
}
###############Decision related###############
#cathayan horse decision governor ping
character_event = {
    id = mountshop.102

    hide_window = yes
    is_triggered_only = yes

	immediate = { FROMFROM = { letter_event = { id = mountshop.103 days = 1 } } }
}

#give cathayan horse
letter_event = {
    id = mountshop.103

    desc = EVTDESAmountshop.103
    border = GFX_event_letter_frame_diplomacy

    is_triggered_only = yes

    option = {
        name = EVTOPTAmountshop.103
		random_list = {
			65 = { add_artifact = cathayan_ceromonial_horse }

			34 = { add_artifact = cathayan_war_horse }

			1 = {
				trigger = {
					NOR = {
						has_global_flag = red_hare_alive
						offmap_cathay = {
							OR = {
								has_status = china_famine
								has_status = china_plague
							}
						}
					}
				}
				modifier = {
					factor = 5
					offmap_cathay = { has_status = china_golden_age }
				}
				add_artifact = red_hare
				set_global_flag = red_hare_alive
			}
		}
		if = {
			limit = {
				offmap_cathay = {
					OR = {
						has_status = china_famine
						has_status = china_plague
					}
				}
			}
			custom_tooltip = {
				text = EVTTOOLTIPAmountshop.103
				new_artifact = { decrease_mount_health_effect = yes }
			}
		}
    }
}

###grant commander mount checks
character_event = {
	id = mountshop.105

	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_character_flag = grant_commander_mount_no_mounts }
			character_event = { id = mountshop.106 }
		}
		else = { character_event = { id = mountshop.107 } }
	}
}

###no mounts available for commander
character_event = {
	id = mountshop.106
	desc = EVTDESAmountshop.106
	picture = GFX_evt_emissary_byzantine

	is_triggered_only = yes

	option = {
		name = EVTOPTAmountshop.106
		hidden_tooltip = {
			clr_character_flag = grant_commander_mount_no_mounts
			clr_character_flag = grant_commander_mount_block
		}
	}
}

###give unlanded commander mount
character_event = {
	id = mountshop.107
	desc = EVTDESAmountshop.107
	picture = GFX_evt_emissary_byzantine

	is_triggered_only = yes

	#courser
	option = {
		name = EVTOPTAmountshop.107
		wealth = -150
		FROMFROM = {
			if = {
				limit = { can_use_horse_archery_trigger = yes }
				add_artifact = mount_bow
			}
			else = { add_artifact = mount_lance }
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }

			add_artifact = courser
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				FROMFROM = { can_use_horse_archery_trigger = yes }
			}
			modifier = {
				factor = 3
				FROMFROM = { is_skilled_horse_archer_trigger = yes}
			}
		}
	}

	#destrier
	option = {
		name = EVTOPTBmountshop.107
		wealth = -150
		FROMFROM = {
			add_artifact = mount_lance
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }

			add_artifact = destrier
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = { factor = 25 }
	}

	#charger
	option = {
		name = EVTOPTCmountshop.107
		wealth = -200
		FROMFROM = {
			add_artifact = mount_lance
			hidden_tooltip = { new_artifact = { set_artifact_flag = commander_addon } }

			add_artifact = charger
			hidden_tooltip = {
				new_artifact = {
					set_artifact_flag = commander_mount
					decrease_mount_health_effect = yes
				}
				check_fair_mount_modifiers_effect = yes
				set_character_flag = has_mount_commander
			}
			opinion = { modifier = opinion_loyal_servant who = ROOT }
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.5
				FROMFROM = { dynasty = ROOT }
			}
		}
	}

	#nvm
	option = {
		name = EVTOPTDmountshop.107

		ai_chance = { factor = 0 }
	}

	after = { clr_character_flag = grant_commander_mount_block }
}




###############Character flavor###############
##mounts gets hit by arrow in combat
character_event = {
	id = mountshop.211
	desc = EVTDESAmountshop.211
	picture = GFX_evt_horsemanship

	is_triggered_only = yes

	only_playable = yes
	has_character_flag = has_mount
	min_age = 16

	trigger = {
		any_artifact = {
			has_artifact_flag = mount
			has_artifact_flag = alive
			NOR={
				has_artifact_flag = mount_health_10
				has_artifact_flag = mount_health_9
				has_artifact_flag = mount_health_8
				has_artifact_flag = mount_health_7
			}
			NOT = { has_artifact_flag = immortal }
			is_artifact_equipped = yes
		}
	}

	weight_multiplier = {
		days = 1

		modifier = {
			factor = 1.25
			trait = aggressive_leader
		}
		modifier = {
			factor = 1.25
			trait = arbitrary
		}
		modifier = {
			factor = 2
			trait = one_eyed
		}
	}

	immediate = { get_current_mount_effect = yes }

	option = {
		name = EVTOPTAmountshop.211
		event_target:current_mount = { decrease_mount_health_effect = yes }
	}
}

###in seclusion, mounts suffer unless brought inside
character_event = {
	id = mountshop.212
	desc = EVTDESAmountshop.212
	picture = GFX_evt_bring_out_your_dead

	only_playable = yes
	has_character_flag = has_mount

	trigger = {
		has_character_modifier = in_seclusion
		capital_scope = { has_disease = yes }
	}

	mean_time_to_happen = {
		months = 9
		modifier = {
			factor = 3.
			ai = no
			war = yes
		}
		modifier = {
			factor = 3.
			ai = no
			multiplayer = yes
		}
	}

	immediate = {
		get_random_mount_no_immortal_effect = yes
		get_random_mount_no_immortal_2_effect = yes
	}

	#let them into the castle
	option = {
		name = EVTOPTAmountshop.212
		if = {
			limit = {
				any_courtier = {
					NOR = {
						character = ROOT
						prisoner = yes
						is_ill = yes
						num_of_symptoms = 1
						has_character_flag = developing_illness
					}
					has_character_modifier = in_seclusion
				}
			}
			random_courtier = {
				limit = {
					NOR = {
						character = ROOT
						prisoner = yes
						is_ill = yes
						num_of_symptoms = 1
						has_character_flag = developing_illness
					}
					has_character_modifier = in_seclusion
				}
				custom_tooltip = {
					text = EVTTOOLTIPAmountshop.212
					give_epidemic_disease_effect = yes
				}
			}
		}
		else = {
			custom_tooltip = {
				text = EVTTOOLTIPAmountshop.212
				give_epidemic_disease_effect = yes
			}
		}

		ai_chance = {
			factor = 30
			modifier = {
				factor = 3
				trait = kind
			}
		}
	}

	#leave them outside
	option = {
		name = EVTOPTBmountshop.212
		event_target:random_mount = {
			show_scope_change = no
			random = {
				chance = 75
				decrease_mount_health_effect = yes
			}
		}
		event_target:random_mount_2 = {
			show_scope_change = no
			random = {
				chance = 75
				decrease_mount_health_effect = yes
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = craven
			}
		}
	}
}

##############Character Flavor Tombola Events################

character_event = {
	id = mountshop.400

	is_triggered_only = yes
	hide_window = yes

	only_playable = yes
	only_capable = yes
	has_character_flag = has_mount

	trigger = {
		NOT = { has_character_modifier = character_flavor_timer }
		is_inaccessible_trigger = no
	}

	weight_multiplier = {
		days = 1

		#more likely to spend time on other stuff
		modifier = {
			factor = 2
			OR = {
				trait = stressed
				trait = depressed
			}
		}
		#nothing else to do
		modifier = {
			factor = 2
			trait = content
		}
		#relevant lifestyles
		modifier = {
			factor = 3
			OR = {
				trait = administrator
				trait = gamer
				trait = gardener
				trait = hunter
				trait = falconer
			}
		}
		#cares more about possessions/animals
		modifier = {
			factor = 1.5
			OR = {
				trait = diligent
				trait = kind
			}
		}
		#wants to show off
		modifier = {
			factor = 1.5
			trait = proud
		}
	}


	immediate = {
		add_character_modifier = { modifier = character_flavor_timer years = 4 hidden = yes }
		check_mount_flags_effect = yes

		if = {
			limit = { NOT = { has_character_flag = has_mount } }
			break = yes
		}

		random_list = {
			###nomad's horse becomes swift from running too much
			100 = {
				trigger = {
					is_nomadic = yes
					any_artifact = {
						is_mount_trigger = yes
						is_healthy_mount_trigger = yes
						can_have_more_mount_traits_trigger = yes
						has_artifact_flag = horse
						NOT = { has_artifact_flag = swift }
					}
				}
				character_event = { id = mountshop.403 }
			}

			###go on a ride
			100 = {
				trigger = {
					any_artifact = {
						is_mount_trigger = yes
						NOT = { has_artifact_flag = elephant }
					}
				}
				character_event = { id = mountshop.404 }
			}
		}
	}
}

###nomad's horse becomes swift from running too much
character_event = {
	id = mountshop.403
	desc = EVTDESAmountshop.403
	picture = GFX_evt_mongols

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				any_artifact = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
					is_artifact_equipped = yes
				}
			}
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					can_have_more_mount_traits_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
					is_artifact_equipped = yes
				}
				save_event_target_as = improved_horse
			}
		}
		else = {
			random_artifact = {
				limit = {
					is_mount_trigger = yes
					is_healthy_mount_trigger = yes
					has_artifact_flag = horse
					NOT = { has_artifact_flag = swift }
				}
				save_event_target_as = improved_horse
			}
		}
	}

	option = {
		name = EVTOPTAmountshop.403
		event_target:improved_horse = {
			custom_tooltip = {
				text = EVTTOOLTIPAmountshop.403
				set_artifact_flag = swift
			}
		}
	}
}


###go on a ride
character_event = {
	id = mountshop.404
	desc = EVTDESAmountshop.404
	picture = GFX_evt_hunt

	is_triggered_only = yes

	immediate = {
		random_artifact = {
			limit = {
				is_mount_trigger = yes
				NOT = { has_artifact_flag = elephant }
			}
			save_event_target_as = random_mount
		}
	}

	#ride around demesne
	option = {
		name = EVTOPTAmountshop.404
		if = {
			limit = { trait = stressed }
			remove_trait = stressed
		}
		random_list = {
			65 = { prestige = 50 }
			20 = {
				trigger = { NOT = { trait = proud } }
				add_trait = proud
			}
			10 = {
				trigger = { NOT = { trait = gregarious } }
				add_trait = gregarious
			}
			5 = {
				trigger = {
					NOR = {
						trait = wounded
						trait = severely_injured
					}
				}
				add_trait_wounded_effect = yes
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_diplomacy_trigger = yes
			}
			modifier = {
				factor = 2
				has_lifestyle_diplomacy_trigger = yes
			}
		}
	}

	#go hunting
	option = {
		name = EVTOPTBmountshop.404
		if = {
			limit = { trait = depressed }
			remove_trait = depressed
		}
		random_list = {
			50 = {
				if = {
					limit = { society_member_of = hermetics }
					hermetic_add_animal_ingredient_effect = yes
				}
				else = { scaled_wealth = { value = 0.15 max = 100 } }
			}
			20 = {
				trigger = { has_any_lifestyle_trait = no }
				add_trait = hunter
			}
			10 = {
				trigger = { NOT = { trait = diligent } }
				add_trait = diligent
			}
			20 = {
				trigger = {
					NOR = {
						trait = wounded
						trait = severely_injured
					}
				}
				add_trait_wounded_effect = yes
			}
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 2
				has_education_martial_trigger = yes
			}
			modifier = {
				factor = 2
				OR = {
					trait = wroth
					trait = proud
				}
			}
		}
	}

	#no
	option = {
		name = EVTOPTCmountshop.404
		if = {
			limit = { NOT = { trait = arbitrary } }
			random = {
				chance = 15
				add_trait = arbitrary
			}
		}
		else = { prestige = -25 }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = dull
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = stubborn
			}
		}
	}
}
