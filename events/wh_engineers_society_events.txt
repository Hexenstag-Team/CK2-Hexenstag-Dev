###Ã„NSI
namespace = dK_engineers

#add characters to Engineers - added here for improved compatibility
character_event = {
	id = dK_engineers.1
	hide_window = yes

	only_rulers = yes
	is_triggered_only = yes

	has_dlc = "Mystics"

	immediate = {
		any_courtier = {
			limit = {
				ai = yes
				prisoner = no
				NOT = { trait = incapable }
				is_adult = yes
				is_in_society = no
				can_join_society = engineers_guild
				controls_religion = no
				block_general_event_trigger = no
			}
			character_event = { id = dK_engineers.2 }
		}
		if = {
			limit = {
				ai = yes
				prisoner = no
				NOT = { trait = incapable }
				is_adult = yes
				is_in_society = no
				can_join_society = engineers_guild				controls_religion = no
				block_general_event_trigger = no
			}
			character_event = { id = dK_engineers.2 }
		}
	}
}

character_event = {
	id = dK_engineers.2
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			95 = {
				#do nothing
			}
			5 = {
				modifier = {
					factor = 2
					higher_tier_than = BARON
				}
				modifier = {
					factor = 5
					learning >= 20
				}
				modifier = {
					factor = 2
					is_smart_trigger = yes
				}
				modifier = {
					factor = 0.5
					trait = content
				}
				join_society = engineers_guild
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes
					}
					25 = {
					}
				}
				if = {
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
		}
	}
}

character_event = {
	id = dK_engineers.10
	desc = EVTDESC_dK_engineers_10
	picture = GFX_evt_weaponsmith
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {

	}

	option = {
		name = EVTOPTA_dK_engineers_10
		custom_tooltip = {
			text = EVTOPTA_dK_engineers_10_TT
			hidden_tooltip = {
				random_list = {
					30 = { #Oh no
						modifier = {
							factor = 2
							OR = {
								trait = drunkard
								trait = lunatic
								trait = possessed
							}
						}
						modifier = {
							factor = 0.5
							OR = {
								trait = patient
								trait = diligent
							}
						}
						modifier = {
							factor = 0.5
							trait = paranoid
						}
						character_event = {
							id = dK_engineers.11
							days = 3
							random = 4
						}
					}
					60 = { #OK.
						modifier = {
							factor = 2
							trait = content
						}
						modifier = {
							factor = 1.2
							trait = craven
						}
						modifier = {
							factor = 0.8
							trait = brave
						}
						modifier = {
							factor = 0.5
							OR = {
								trait = ambitious
								trait = envious
								trait = proud
							}
						}
						character_event = {
							id = dK_engineers.13
							days = 3
							random = 4
						}
					}
					10 = { #Oh yes.
						modifier = {
							factor = 3
							trait = genius
						}
						modifier = {
							factor = 2
							trait = brilliant
						}
						modifier = {
							factor = 1.5
							learning >= 20
						}
						modifier = {
							factor = 0.2
							trait = depressed
						}
						character_event = {
							id = dK_engineers.14
							days = 3
							random = 4
						}
					}
				}
			}
		}
		ai_chance = { factor = 1 }
	}
}

#Experimentation outcomes

#Oh no!
character_event = {
	id = dK_engineers.11
	desc = EVTDESC_dK_engineers_11
	picture = GFX_evt_weaponsmith
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {

	}

	option = {
		name = EVTOPTA_dK_engineers_11
		add_character_modifier = { name = impractical_innovation duration = 730 }
		add_society_currency_minor_effect = yes
		add_mission_fail_influence_effect = yes

		random_list = {
			5 = {
				death = { death_reason = death_accident }
			}
			10 = {
				add_maimed_trait_effect = yes
			}
			75 = {
				add_trait = wounded
			}
			10 = {
			}
		}
	}
}

#Oh well.
character_event = {
	id = dK_engineers.12
	desc = EVTDESC_dK_engineers_12
	picture = GFX_evt_weaponsmith
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {

	}

	option = {
		name = EVTOPTA_dK_engineers_12
		add_character_modifier = { name = impractical_innovation duration = 730 }
		add_society_currency_trivial_effect = yes
	}
}

#OK
character_event = {
	id = dK_engineers.13
	desc = EVTDESC_dK_engineers_13
	picture = GFX_evt_weaponsmith
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {

	}

	option = {
		name = EVTOPTA_dK_engineers_13
		add_character_modifier = { name = practical_innovation duration = 730 }
		add_society_currency_minor_effect = yes
		economy_techpoints = 5
	}
}

#Oh yes!
character_event = {
	id = dK_engineers.14
	desc = EVTDESC_dK_engineers_14
	picture = GFX_evt_weaponsmith
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	immediate = {

	}

	option = {
		name = EVTOPTA_dK_engineers_14
		add_character_modifier = { name = impractical_innovation duration = 730 }
		add_society_currency_major_effect = yes
		add_mission_succeed_influence_effect = yes
		military_techpoints = 5
	}
}
