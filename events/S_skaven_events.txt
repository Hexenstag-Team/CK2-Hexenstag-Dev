namespace = skavens
############################################
#
#skavens.16-17 Wants a Duchy
#skavens.20-21 Wants County
# Skaven do not have children the usual way
character_event = {
	id = skavens.1

	min_age = 16
	capable_only = yes
	prisoner = no
	only_men = yes
	is_triggered_only = yes

	hide_window = yes
	religion_group = horned_rat_god_group

	trigger = {
		trait = creature_skaven
		is_ruler = yes
		higher_tier_than = BARON
		is_incapacitated_trigger = no
		NOT = { trait = eunuch }
		NOT = { trait = transgender }
		NOT = { trait = celibate }
		NOT = { trait = infertile }
		NOT = { trait = incapable }
		NOT = { num_of_children = 5 } #this is here as a failsafe in case the modifier doesn't work for some reason. Remove it for !!!FUN!!!
		any_courtier = {
			is_female = yes
			is_pregnant = no
			is_alive = yes
			trait = creature_skaven
			trait = skaven_breeder
			NOT = { trait = eunuch }
			NOT = { trait = transgender }
			NOT = { trait = infertile }
			NOT = { trait = incapable }
			NOT = { has_character_modifier = stage_progressed } #so that the consorts will cycle
		}
	}

	weight_multiplier = {
		years = 30
		modifier = {
			factor = 0.67
			war = yes
		}
		modifier = {
			factor = 0.02
			in_command = yes
		}
		modifier = {
			factor = 3.0
			trait = retired_with_harem
		}
		modifier = {
			factor = 2.0
			has_character_modifier = horny_harem_mod
		}
		modifier = {
			factor = 1.25
			trait = lustful
		}
		modifier = {
			factor = 0.25
			trait = shy
		}
		modifier = {
			factor = 1.0
			trait = gregarious
		}
		modifier = {
			factor = 1.15
			trait = hedonist
		}
		modifier = {
			factor = 0.25
			trait = ill
		}
		modifier = {
			factor = 0.25
			trait = stressed
		}
		modifier = {
			factor = 0.15
			trait = depressed
		}
		modifier = {
			factor = 0.75
			trait = kind
		}
		modifier = {
			factor = 0.67
			trait = just
		}
		modifier = {
			factor = 1.05
			trait = cruel
		}
		modifier = {
			factor = 1.05
			trait = arbitrary
		}
		modifier = {
			factor = 0.33
			trait = possessed
		}
		modifier = {
			factor = 0.33
			trait = hunchback
		}
		modifier = {
			factor = 0.67
			trait = clubfooted
		}
		modifier = {
			factor = 0.25
			trait = pneumonic
		}
		modifier = {
			factor = 0.05
			trait = homosexual
		}
		modifier = {
			factor = 0.25
			trait = dwarf
		}
		modifier = {
			factor = 0.05
			trait = inbred
		}
		modifier = {
			factor = 1.5
			trait = strong
		}
		modifier = {
			factor = 0.75
			trait = weak
		}
		modifier = {
			factor = 0.75
			trait = scholar
		}
		modifier = {
			factor = 0.75
			trait = gardener
		}
		modifier = {
			factor = 0.75
			trait = hunter
		}
		modifier = {
			factor = 0.75
			trait = duelist
		}
		modifier = {
			factor = 0.75
			trait = falconer
		}
		modifier = {
			factor = 0.75
			trait = mystic
		}
		modifier = {
			factor = 0.75
			trait = temperate
		}
		modifier = {
			factor = 0.75
			trait = charitable
		}
		modifier = {
			factor = 0.67
			trait = slothful
		}
		modifier = {
			factor = 0.75
			trait = diligent
		}
		modifier = {
			factor = 0.75
			trait = patient
		}
		modifier = {
			factor = 0.8
			trait = humble
		}
		modifier = {
			factor = 0.9
			trait = craven
		}
		modifier = {
			factor = 1.1
			trait = brave
		}
		modifier = {
			factor = 0.75
			trait = paranoid
		}
		modifier = {
			factor = 1.2
			trait = trusting
		}
		modifier = {
			factor = 0
			trait = incapable
		}
		modifier = {
			factor = 0.33
			trait = disfigured
		}
		modifier = {
			factor = 0.33
			trait = wounded
		}
		modifier = {
			factor = 0.33
			trait = maimed
		}
		modifier = {
			factor = 0.5
			trait = blinded
		}
		modifier = {
			factor = 0.2
			trait = is_fat
		}
		modifier = {
			factor = 0.2
			trait = is_malnourished
		}
		modifier = {
			factor = 1.1
			trait = drunkard
		}
		modifier = {
			factor = 0.85
			trait = addict
		}
		modifier = {
			factor = 0.67
			trait = diligent
		}
		#Sickness
		modifier = {
			factor = 0.01
			trait = infirm
			NOT={culture=pestilens}
		}
		modifier = {
			factor = 0.01
			trait = leper
			NOT={culture=pestilens}
		}
		modifier = {
			factor = 0.7
			trait = infirm
			culture=pestilens
		}
		modifier = {
			factor = 0.7
			trait = leper
			culture=pestilens
		}
		#Children
		modifier = {
			factor = 1.2
			any_child = {
				is_alive = no
			}
		}
		modifier = {
			factor = 0.8
			any_child = {
				count = 2
				is_alive = yes
			}
		}
		modifier = {
			factor = 0.5
			any_child = {
				count = 4
				is_alive = yes
			}
		}
		modifier = {
			factor = 0.5
			any_child = {
				count = 4
				is_alive = yes
			}
		}
		modifier = {
			factor = 0
			any_child = {
				count = 8
				is_alive = yes
			}
		}

		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 4
			}
		}
		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 6
			}
		}
		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 8
				}
		}
		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 10
			}
		}
		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 12
				}
		}
		modifier = {
			factor = 1.2
			any_courtier = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				count = 15
			}
		}
		#Education
		modifier = {
			factor = 0.75
			trait = poor_warrior
		}
		modifier = {
			factor = 0.75
			trait = trained_warrior
		}
		modifier = {
			factor = 0.75
			trait = skilled_warrior
		}
		modifier = {
			factor = 0.75
			trait = master_warrior
		}
		modifier = {
			factor = 0.75
			trait = naive_appeaser
		}
		modifier = {
			factor = 0.75
			trait = underhanded_rogue
		}
		modifier = {
			factor = 0.75
			trait = charismatic_negotiator
		}
		modifier = {
			factor = 0.75
			trait = grey_eminence
		}
	}

	immediate = {
		random_courtier = {
			limit = {
				is_female = yes
				is_pregnant = no
				is_alive = yes
				trait = creature_skaven
				trait = skaven_breeder
				NOT = { trait = eunuch }
				NOT = { trait = transgender }
				NOT = { trait = infertile }
				NOT = { trait = incapable }
				NOT = { has_character_modifier = stage_progressed } #so that the consorts will cycle
			}
			character_event = { id = skavens.1001 }
		}
	}
}

#Create the Skaven and set the two parents. Skaven are spawned at 15 years old, to represent quick growth.
character_event = {
	id = skavens.1001
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		random_list = {
			5 = { add_character_modifier = { name = stage_progressed
							duration = 1100
							hidden = yes } }
			5 = { add_character_modifier = { name = stage_progressed
							duration = 1000
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 900
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 800
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 700
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 600
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 500
							hidden = yes } }
			15 = { add_character_modifier = { name = stage_progressed
							duration = 400
							hidden = yes } }
			15 = { add_character_modifier = { name = stage_progressed
							duration = 300
							hidden = yes } }
			10 = { add_character_modifier = { name = stage_progressed
							duration = 250
							hidden = yes } }
		}
		random_list = {
			90 = {
				create_character = {
					random_traits = yes
					age = 15
					female = no
					dynasty = FROM
					culture = FROM
					trait = creature_skaven
				}
			}
			10 = {
				create_character = { 	random_traits = yes
					age = 15
					female = yes
					dynasty = FROM
					culture = FROM
					trait = creature_skaven
				}
			}
		}
		new_character = {
			set_mother = ROOT
			set_father = FROM
			add_trait = craven #All Skaven are born cowards
			add_trait = greedy #All Skaven are born craving
			add_trait = envious #All Skaven are born petty
			# character_event = { id = 300 days = 1 } #On birth-postbirth events
			# character_event = { id = 312 days = 1 }
			# character_event = { id = 313 days = 1 }
			# character_event = { id = 314 days = 1 }
			# character_event = { id = 318 days = 1 }
			character_event = { id = sins.1189 }
			character_event = { id = beauty.0 }
			character_event = { id = intelligence.0 }
			character_event = { id = strength.0 }
			character_event = { id = spleasure.177 }
			character_event = { id = sins.1225 }
			if = { limit = { is_female = yes }
				add_trait = skaven_breeder
			}
			random_list = {
				70 = {
					set_graphical_culture = skaven_main
					if = { limit = { is_female = no }
					character_event = { id = skavens.1005 days = 1 } } #training event for Skavens
				}
				25 = {
					modifier = { factor = 1.25
						ROOT = { trait = black_skaven }
					}
					modifier = { factor = 1.75
						FROM = { trait = black_skaven }
					}
					modifier = { factor = 0.5
						is_female = yes
					}
					set_graphical_culture = skaven_black
					add_trait = black_skaven
					if = { limit = { is_female = no }
						character_event = { id = skavens.1005 days = 1 }
					} #training event for Skavens
					if = { limit = { is_female = no }
						FROM = { character_event = { id = skavens.1002 days = 1 } }
					}
				}
				5 = {
					modifier = { factor = 1.25
						ROOT = { trait = white_skaven }
					}
					modifier = { factor = 0
						is_female = yes
					}
					modifier = { factor = 1.75
						FROM = { trait = white_skaven }
					}
					set_graphical_culture = skaven_white
					add_trait = white_skaven
					character_event = { id = skavens.1004 days = 365 random = 50 } #A new Grey Seer has born
					FROM = { character_event = { id = skavens.1003 days = 1 } }
				}
			}
			random_list = {
				25 = {
					modifier = { factor = 1.25
						ROOT = { trait = greedy }
					}
					modifier = { factor = 1.75
						FROM = { trait = greedy }
					}
					add_trait = greedy
				}
				25 = {
					modifier = { factor = 1.25
						ROOT = { trait = envious }
					}
					modifier = { factor = 1.75
						FROM = { trait = envious }
					}
					add_trait = envious
				}
				25 = {
					modifier = { factor = 1.25
						ROOT = { trait = ambitious }
					}
					modifier = { factor = 1.75
						FROM = { trait = ambitious }
					}
					modifier = { factor = 2
						graphical_culture = skavenwhitegfx
					}
					add_trait = ambitious
				}
				25 = {
					modifier = { factor = 1.25
						ROOT = { trait = wroth }
					}
					modifier = { factor = 1.75
						FROM = { trait = wroth }
					}
					modifier = { factor = 1.75
						graphical_culture = skavenblackgfx
					}
					add_trait = wroth
				}
			}
			random_list = {
				75 = { add_trait = deceitful }
				25 = {
					modifier = { factor = 0.75
						ROOT = { trait = deceitful }
					}
					modifier = { factor = 0.5
						FROM = { trait = deceitful }
					}
				}
			 }
			random_list = {
				55 = { add_trait = paranoid }
				45 = {
					modifier = { factor = 0.75
						ROOT = { trait = paranoid }
					}
					 modifier = { factor = 0.5
						FROM = { trait = paranoid }
					}
				}
			}

			if = { limit = { FROM = { diplomacy = 5 } }
				change_diplomacy = 2 }
			if = { limit = { FROM = { diplomacy = 10 } }
				change_diplomacy = 2 }
			if = { limit = { FROM = { diplomacy = 15 } }
				change_diplomacy = 2 }
			if = { limit = { FROM = { diplomacy = 20 } }
				change_diplomacy = 4 }
			if = { limit = { ROOT = { diplomacy = 5 } }
				change_diplomacy = 2 }
			if = { limit = { ROOT = { diplomacy = 10 } }
				change_diplomacy = 2 }
			if = { limit = { ROOT = { diplomacy = 15 } }
				change_diplomacy = 2 }
			if = { limit = { ROOT = { diplomacy = 20 } }
				change_diplomacy = 4 }

			if = { limit = { FROM = { martial = 5 } }
				change_martial = 2 }
			if = { limit = { FROM = { martial = 10 } }
				change_martial = 2 }
			if = { limit = { FROM = { martial = 15 } }
				change_martial = 2 }
			if = { limit = { FROM = { martial = 20 } }
				change_martial = 4 }
			if = { limit = { ROOT = { martial = 5 } }
				change_martial = 2 }
			if = { limit = { ROOT = { martial = 10 } }
				change_martial = 2 }
			if = { limit = { ROOT = { martial = 15 } }
				change_martial = 2 }
			if = { limit = { ROOT = { martial = 20 } }
				change_martial = 4 }

			if = { limit = { FROM = { stewardship = 5 } }
				change_stewardship = 2 }
			if = { limit = { FROM = { stewardship = 10 } }
				change_stewardship = 2 }
			if = { limit = { FROM = { stewardship = 15 } }
				change_stewardship = 2 }
			if = { limit = { FROM = { stewardship = 20 } }
				change_stewardship = 4 }
			if = { limit = { ROOT = { stewardship = 5 } }
				change_stewardship = 2 }
			if = { limit = { ROOT = { stewardship = 10 } }
				change_stewardship = 2 }
			if = { limit = { ROOT = { stewardship = 15 } }
				change_stewardship = 2 }
			if = { limit = { ROOT = { stewardship = 20 } }
				change_stewardship = 4 }

			if = { limit = { FROM = { intrigue = 5 } }
				change_intrigue = 2 }
			if = { limit = { FROM = { intrigue = 10 } }
				change_intrigue = 2 }
			if = { limit = { FROM = { intrigue = 15 } }
				change_intrigue = 2 }
			if = { limit = { FROM = { intrigue = 20 } }
				change_intrigue = 4 }
			if = { limit = { ROOT = { intrigue = 5 } }
				change_intrigue = 2 }
			if = { limit = { ROOT = { intrigue = 10 } }
				change_intrigue = 2 }
			if = { limit = { ROOT = { intrigue = 15 } }
				change_intrigue = 2 }
			if = { limit = { ROOT = { intrigue = 20 } }
				change_intrigue = 4 }

			if = { limit = { FROM = { learning = 5 } }
				change_learning = 2 }
			if = { limit = { FROM = { learning = 10 } }
				change_learning = 2 }
			if = { limit = { FROM = { learning = 15 } }
				change_learning = 2 }
			if = { limit = { FROM = { learning = 20 } }
				change_learning = 4 }
			if = { limit = { ROOT = { learning = 5 } }
				change_learning = 2 }
			if = { limit = { ROOT = { learning = 10 } }
				change_learning = 2 }
			if = { limit = { ROOT = { learning = 15 } }
				change_learning = 2 }
			if = { limit = { ROOT = { learning = 20 } }
				change_learning = 4 }
		} #closesnewcharacter
	}
}

#notify a black skaven was born from a breeder of yours
character_event = {
	id = skavens.1002
	desc = EVTDESCskavens1002
	picture = GFX_evt_black_skaven

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1002
		prestige = 50
	}
}
#notify a white skaven was born from a breeder of yours
character_event = {
	id = skavens.1003
	desc = EVTDESCskavens1003
	picture = GFX_evt_grey_seer

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1003
		prestige = 150
		piety = 150
	}
}

#white skaven has grown into a Grey Seer
character_event = {
	id = skavens.1004
	desc = EVTDESCskavens1004
	picture = GFX_evt_grey_seer

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1004
		prestige = 250
		piety = 250
		add_trait = grey_seer
		add_trait = lore_vermin
		culture = skaven_main
		random = { chance = 25
			add_trait = proud }
		z_magic_power_random = yes
		z_magic_xp_turnon = yes
		if = { limit = { trait = mastermind_theologian }
			change_learning = 2
			change_intrigue = 1
			break = yes
		}
		if = { limit = { trait = scholarly_theologian }
			remove_trait = scholarly_theologian
			add_trait = mastermind_theologian
			break = yes
		}
		if = { limit = { trait = martial_cleric }
			remove_trait = martial_cleric
			add_trait = scholarly_theologian
			break = yes
		}
		if = { limit = { trait = detached_priest }
			remove_trait = detached_priest
			add_trait = martial_cleric
			break = yes
		}
	}
}

#ping new character
character_event = {
	id = skavens.1005
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = { limit = { liege = { higher_tier_than = BARON } }
			liege = { character_event = { id = skavens.1006 } }
		}
	}
}
#the liege decides which profession the young ratling will be groomed for
character_event = {
	id = skavens.1006
	desc = EVTDESCskavens1006
	picture = GFX_evt_skaven_gunner
	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1006 #Groom as Stormvermin
		trigger = {
			FROM = { trait = black_skaven }
			NOT = { culture = eshin }
		}
		prestige = -50
		if={limit={ai=no}
			wealth = -30
		}
		hidden_tooltip = {
			random_list = {
				85 = {
					modifier = { factor = 1.25
						FROM = { trait = hardy }
					}
					modifier = { factor = 1.45
						FROM = { trait = tough }
					}
					modifier = { factor = 1.65
						FROM = { trait = strong }
					}
					modifier = { factor = 0.65
						FROM = { trait = fragile }
					}
					modifier = { factor = 0.75
						FROM = { trait = weak }
					}
					modifier = { factor = 0.85
						FROM = { trait = soft }
					}
					modifier = { factor = 1.25
						FROM = { trait = deceitful }
					}
					modifier = { factor = 1.25
						FROM = { trait = ambitious }
					}
					modifier = { factor = 1.25
						FROM = { trait = wroth }
					}
					modifier = { factor = 1.25
						FROM = { trait = brave }
					}
					modifier = { factor = 1.25
						FROM = { trait = paranoid }
					}
					FROM = { character_event = { id = skavens.1007 days = 365 random = 50 } }
				}
				10 = { FROM = { character_event = { id = skavens.1012 days = 365 random = 50 } } } #failure
				5 = { FROM = { character_event = { id = skavens.1013 days = 365 random = 50 } } } #deadly failure
			}
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 0.5
				NOT = { prestige = 100 }
			}
			modifier = { factor = 0.5
				NOT = { prestige = 500 }
			}
			modifier = { factor = 2.5
				culture=skaven_main
				trait=council_warlord
			}
		}
	}
	option = {
		name = EVTOPTBskavens1006  #Groom as Master Moulder
		trigger = { culture = moulder }
		if={limit={ai=no}
			wealth = -75
		}
		prestige = -100
		hidden_tooltip = { 
			random_list = {
				80 = {
					modifier = { factor = 1.25
						FROM = { trait = bright }
					}
					modifier = { factor = 1.35
						FROM = { trait = smart }
					}
					modifier = { factor = 1.45
						FROM = { trait = quick }
					}
					modifier = { factor = 1.5
						FROM = { trait = brilliant }
					}
					modifier = { factor = 1.75
						FROM = { trait = genius }
					}
					modifier = { factor = 0.95
						FROM = { trait = dim }
					}
					modifier = { factor = 0.85
						FROM = { trait = dumb }
					}
					modifier = { factor = 0.75
						FROM = { trait = slow }
					}
					modifier = { factor = 0.65
						FROM = { trait = idiot }
					}
					modifier = { factor = 0.5
						FROM = { trait = imbecile }
					}
					modifier = { factor = 1.25
						FROM = { trait = deceitful }
					}
					modifier = { factor = 1.25
						FROM = { trait = ambitious }
					}
					modifier = { factor = 1.25
						FROM = { trait = greedy }
					}
					modifier = { factor = 1.25
						FROM = { trait = cruel }
					}
					modifier = { factor = 1.25
						FROM = { trait = paranoid }
					}
					FROM = { character_event = { id = skavens.1008 days = 365 random = 50 } }
				}
				16 = { FROM = { character_event = { id = skavens.1012 days = 365 random = 50 } } } #failure
				4 = { FROM = { character_event = { id = skavens.1013 days = 365 random = 50 } } } #deadly failure
			}
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 0.25
				NOT = { prestige = 250 }
			}
			modifier = { factor = 0.5
				NOT = { prestige = 750 }
			}
			modifier = { factor = 2.5
				culture=moulder
				trait=council_warlord
			}
			modifier = { factor = 0.5
				NOT={trait=council_warlord}
			}
			modifier = { factor = 0.5
				NOT={trait=ambitious}
			}
		}
	}
	option = {
		name = EVTOPTCskavens1006 #Groom as Plaguelord
		trigger = { culture = pestilens }
		if={limit={ai=no}
			prestige = -50
			piety = -400
		}
		else={
			piety = -100
		}
		hidden_tooltip = {
			random_list = {
				30 = {
					modifier = { factor = 0.5
						FROM = { trait = cynical }
					}
					modifier = { factor = 1.7
						FROM = { trait = zealous }
					}
					modifier = { factor = 1.25
						FROM = { trait = ambitious }
					}
					modifier = { factor = 1.25
						FROM = { trait = greedy }
					}
					modifier = { factor = 1.25
						FROM = { trait = envious }
					}
					modifier = { factor = 1.25
						FROM = { trait = paranoid }
					}
					FROM = { character_event = { id = skavens.1009 days = 365 random = 50 } }
				}
				60 = { FROM = { character_event = { id = skavens.1012 days = 365 random = 50 } } } #failure
				10 = { FROM = { character_event = { id = skavens.1013 days = 365 random = 50 } } } #deadly failure
			}
		}
		ai_chance = { 
			factor = 10
			modifier = { factor = 0.25
				NOT = { piety = 250 }
			}
			modifier = { factor = 0.5
				NOT = { piety = 750 }
			}
			modifier = { factor = 0.25
				NOT = { prestige = 125 }
			}
			modifier = { factor = 0.5
				NOT = { prestige = 250 }
			}
			modifier = { factor = 2.5
				culture=pestilens
				trait=council_warlord
			}
			modifier = { factor = 0.5
				NOT={trait=council_warlord}
			}
			modifier = { factor = 0.5
				NOT={trait=ambitious}
			}
		}
	}
	option = {
		name = EVTOPTDskavens1006 #Groom As master Assassin
		trigger = { culture = eshin
			FROM = { trait = black_skaven }
		}
		if={limit={ai=no}
			prestige = -150
			wealth = -20
		}
		else={
			prestige = -75
		}
		hidden_tooltip = {
			random_list = {
				85 = {
					modifier = { factor = 1.25
						FROM = { trait = hardy }
					}
					modifier = { factor = 1.45
						FROM = { trait = tough }
					}
					modifier = { factor = 1.65
						FROM = { trait = strong }
					}
					modifier = { factor = 0.65
						FROM = { trait = fragile }
					}
					modifier = { factor = 0.75
						FROM = { trait = weak }
					}
					modifier = { factor = 0.85
						FROM = { trait = soft }
					}
					modifier = { factor = 0.75
						FROM = { trait = gregarious }
					}
					modifier = { factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = { factor = 1.25
						FROM = { trait = ambitious }
					}
					modifier = { factor = 1.25
						FROM = { trait = shy }
					}
					modifier = { factor = 1.25
						FROM = { trait = cruel }
					}
					modifier = { factor = 1.5
						FROM = { trait = paranoid }
					}
					FROM = { character_event = { id = skavens.1010 days = 365 random = 50 } }
				}
				15 = { FROM = { character_event = { id = skavens.1013 days = 365 random = 50 } } } #deadly failure
			}
		}
		ai_chance = { 
			factor = 10
			modifier = { factor = 0.12
				NOT = { prestige = 125 }
			}
			modifier = { factor = 0.2
				NOT = { prestige = 250 }
			}
			modifier = { factor = 2.5
				culture=eshin
				trait=council_warlord
			}
			modifier = { factor = 0.5
				NOT={trait=council_warlord}
			}
			modifier = { factor = 0.5
				NOT={trait=ambitious}
			}
		}
	}
	option = {
		name = EVTOPTEskavens1006
		trigger = { culture = skryre }
		prestige = -25
		if={limit={ai=no}
			wealth = -150
		}
		hidden_tooltip = {
			random_list = {
				80 = {
					modifier = { factor = 1.25
						FROM = { trait = bright }
					}
					modifier = { factor = 1.35
						FROM = { trait = smart }
					}
					modifier = { factor = 1.45
						FROM = { trait = quick }
					}
					modifier = { factor = 1.5
						FROM = { trait = brilliant }
					}
					modifier = { factor = 1.75
						FROM = { trait = genius }
					}
					modifier = { factor = 0.95
						FROM = { trait = dim }
					}
					modifier = { factor = 0.85
						FROM = { trait = dumb }
					}
					modifier = { factor = 0.75
						FROM = { trait = slow }
					}
					modifier = { factor = 0.65
						FROM = { trait = idiot }
					}
					modifier = { factor = 0.5
						FROM = { trait = imbecile }
					}
					modifier = { factor = 1.25
						FROM = { trait = deceitful }
					}
					modifier = { factor = 1.25
						FROM = { trait = ambitious }
					}
					modifier = { factor = 1.25
						FROM = { trait = cynical }
					}
					modifier = { factor = 1.25
						FROM = { trait = envious }
					}
					modifier = { factor = 1.25
						FROM = { trait = paranoid }
					}
					FROM = { character_event = { id = skavens.1011 days = 365 random = 50 } }
				}
				5 = { FROM = { character_event = { id = skavens.1012 days = 365 random = 50 } } } #failure
				15 = { FROM = { character_event = { id = skavens.1013 days = 365 random = 50 } } } #deadly failure
			}
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 0.1
				NOT = { wealth = 100 }
			}
			modifier = { factor = 0.7
				NOT = { wealth = 250 }
			}
			modifier = { factor = 0.2
				NOT = { prestige = 250 }
			}
			modifier = { factor = 0.1
				NOT = { prestige = 125 }
			}
			modifier = { factor = 2.5
				culture=skryre
				trait=council_warlord
			}
			modifier = { factor = 0.5
				NOT={trait=council_warlord}
			}
			modifier = { factor = 0.5
				NOT={trait=ambitious}
			}
		}
	}
	option = {
		name = EVTOPTFskavens1006
		ai_chance = { factor = 10
			modifier = {
				factor = 0.25
				NOT = { any_child = { character = FROM } }
			}
			modifier = { factor = 1.5
				NOT={trait=council_warlord}
			}
			modifier = { factor = 2.5
				lower_tier_than=duke
			}
		}
	}
}

#Skaven has grown into a Elite Stormvermin
character_event = {
	id = skavens.1007
	desc = EVTDESCskavens1007
	picture = GFX_evt_skaven_warlord

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1007
		prestige = 150
		add_trait = elite_stormvermin
		random = { 
			chance = 10
			add_trait = brave 
		}
		if = { limit = { trait = skilled_tactician }
			remove_trait = skilled_tactician
			add_trait = brilliant_strategist
			break = yes 
		}
		if = { limit = { trait = tough_soldier }
			remove_trait = tough_soldier
			add_trait = skilled_tactician
			break = yes 
		}
		if = { limit = { trait = misguided_warrior }
			remove_trait = misguided_warrior
			add_trait = tough_soldier
			break = yes 
		}
	}
}
#Skaven has grown into a Master Moulder
character_event = {
	id = skavens.1008
	desc = EVTDESCskavens1008
	picture = GFX_evt_skaven_moulder

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1008
		prestige = 150
		add_trait = master_moulder
		culture = moulder
		random = { 
			chance = 10
			add_trait = gluttonous 
		}
		if = { limit = { higher_tier_than = BARON }
			any_demesne_title = { culture = moulder } 
		}
		if = { limit = { trait = fortune_builder }
			remove_trait = fortune_builder
			add_trait = midas_touched
			break = yes 
		}
		if = { limit = { trait = thrifty_clerk }
			remove_trait = thrifty_clerk
			add_trait = fortune_builder
			break = yes
		}
		if = { limit = { trait = indulgent_wastrel }
			remove_trait = indulgent_wastrel
			add_trait = thrifty_clerk
			break = yes 
		}
	}
}
#Skaven has grown into a Plaguelord
character_event = {
	id = skavens.1009
	desc = EVTDESCskavens1009
	picture = GFX_evt_skaven_squeak

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1009
		piety = 150
		add_trait = leper
		add_trait = plaguelord
		culture = pestilens
		z_magic_power_random = yes
		z_magic_xp_turnon = yes
		random = { 
			chance = 10
			add_trait = charitable 
		}
		if = { limit = { higher_tier_than = BARON }
			any_demesne_title = { culture = pestilens } 
		}
		if = { limit = { trait = scholarly_theologian }
			remove_trait = scholarly_theologian
			add_trait = mastermind_theologian
			break = yes 
		}
		if = { limit = { trait = martial_cleric }
			remove_trait = martial_cleric
			add_trait = scholarly_theologian
			break = yes 
		}
		if = { limit = { trait = detached_priest }
			remove_trait = detached_priest
			add_trait = martial_cleric
			break = yes 
		}
	}
}
#Skaven has grown into a Master Assassin
character_event = {
	id = skavens.1010
	desc = EVTDESCskavens1010
	picture = GFX_evt_skaven_assassin

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1010
		prestige = 100
		add_trait = eshin_assassin
		culture = eshin
		random = {
			chance = 20
			add_trait = deceitful 
		}
		if = { limit = { higher_tier_than = BARON }
			any_demesne_title = { culture = eshin } 
		}
		if = { limit = { trait = intricate_webweaver }
			remove_trait = intricate_webweaver
			add_trait = elusive_shadow
			break = yes 
		}
		if = { limit = { trait = flamboyant_schemer }
			remove_trait = flamboyant_schemer
			add_trait = intricate_webweaver
			break = yes 
		}
		if = { limit = { trait = amateurish_plotter }
			remove_trait = amateurish_plotter
			add_trait = flamboyant_schemer
			break = yes 
		}
	}
}
#Skaven has grown into a Warlock-Engineer
character_event = {
	id = skavens.1011
	desc = EVTDESCskavens1011
	picture = GFX_evt_skaven_engineer

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1011
		prestige = 70
		add_trait = warlock_engineer
		culture = skryre
		random = { 
			chance = 20
			add_trait = addict
		}
		if = {
			limit = { higher_tier_than = BARON }
			any_demesne_title = { culture = skryre } 
		}
		if = { limit = { trait = charismatic_negotiator }
			remove_trait = charismatic_negotiator
			add_trait = grey_eminence
			break = yes 
		}
		if = { limit = { trait = underhanded_rogue }
			remove_trait = underhanded_rogue
			add_trait = charismatic_negotiator
			break = yes 
		}
		if = { limit = { trait = naive_appeaser }
			remove_trait = naive_appeaser
			add_trait = underhanded_rogue
			break = yes 
		}
	}
}
#Skaven was a failure
character_event = {
	id = skavens.1012
	desc = EVTDESCskavens1012
	picture = GFX_evt_skaven_swamp

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1012
		prestige = -70
	}
}
#Skaven was a failure and is dead
character_event = {
	id = skavens.1013
	desc = EVTDESCskavens1013
	picture = GFX_evt_skaven_swamp

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens1013
		prestige = -70
		death = { death_reason = death_accident }
	}
}

#Skaven old age comes faster, unless the Skaven is special.
character_event = {
	id = skavens.2
	desc = EVTDESCskavens2
	picture = GFX_evt_skaven_old
	is_triggered_only = yes
	min_age = 35
	religion_group=horned_rat_god_group
	#mean_time_to_happen = { years = 2}

	trigger = {
		trait = creature_skaven
		NOR = {
			trait = warlock_engineer
			trait = plaguelord
			trait = master_moulder
			trait = eshin_assassin
			trait = council_warlord
			trait = grey_seer
			trait = immortal
		}		
	}

	weight_multiplier = {
		years = 2
		modifier = {
			factor = 1.5
			age = 35
		}

		modifier = {
			factor = 2.0
			age = 40
		}

		modifier = {
			factor = 2.5
			age = 45
		}
	}

	option = {
        name = {
        	text = EVTOPTAskavens2
			trigger = {NOT={trait=old_1}}
        }
        name = {
        	text = EVTOPTAskavens2b
			trigger = {trait=old_1}
        }
		if={limit={trait=old_1}
			death = yes
		}
		else={
			add_trait=old_1
		}
	}
}

## Maybe use later for eating warpstone
#if = {
#	limit = {
#		or = {
#			trait = grey_seer
#			trait = warlock_engineer
#			trait = plaguelord
#		}
#	}
#	z_magic_lvl_sequential_increase = yes
#	character_event = { id = skavens.30002 years = 1}
#	spell_points_refresh = yes
#}
#Eat Warpstone
character_event = {
	id = skavens.3
	picture = "GFX_evt_warpstone_vein"
	desc = EVTDESCskavens3

	is_triggered_only = yes

	option = { #Consume warpstone dust
		name = EVTOPTAskavens3
		trigger = {
			has_artifact = warpstone_dust
		}
		unsafe_destroy_artifact = warpstone_dust
		#event_target:itemtarget = {
			if = {
				limit = {
					ROOT = {
						NOT = { religion_group = necromantic_group }
					}
				}
				hidden_tooltip = {
					random = {
						chance = 15
						add_trait = addict
					}
					character_event = { id = wh_mutation.200 } #Lunacy Counter
				}
				add_character_modifier = { name = warpstone_1 duration = 365 stacking = yes }
				random = {
					chance = 5
					add_character_modifier = { name = warpstone_frenzy duration = 365 stacking = yes}
				}
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						NOR = {
							has_character_modifier = necromantic_power_1
							has_character_modifier = necromantic_power_2
							has_character_modifier = necromantic_power_3
							has_character_modifier = necromantic_power_4
							has_character_modifier = necromantic_power_5
						}
					}
				}
				add_character_modifier = { name = necromantic_power_1 duration = 240 }
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_1
					}
				}
				add_character_modifier = { name = necromantic_power_2 duration = 240 }
				remove_character_modifier = necromantic_power_1
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_2
					}
				}
				add_character_modifier = { name = necromantic_power_3 duration = 240 }
				remove_character_modifier = necromantic_power_2
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_3
					}
				}
				add_character_modifier = { name = necromantic_power_4 duration = 240 }
				remove_character_modifier = necromantic_power_3
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_4
					}
				}
				add_character_modifier = { name = necromantic_power_5 duration = 240 }
				remove_character_modifier = necromantic_power_4
				break = yes
			}
		#}
	}

	option = { #Consume warpstone shard
		name = EVTOPTBskavens3
		trigger = {
			has_artifact = warpstone_shard
		}
		unsafe_destroy_artifact = warpstone_shard
		#event_target:itemtarget = {
			if = {
				limit = {
					ROOT = {
						NOT = { religion_group = necromantic_group }
					}
				}
				hidden_tooltip = {
					random = {
						chance = 50
						add_trait = addict
					}
					character_event = { id = wh_mutation.200 } #Lunacy Counter
				}
				add_character_modifier = { name = warpstone_3 duration = 365 stacking = yes }
				random = {
					chance = 50
					add_character_modifier = { name = warpstone_frenzy duration = 365 stacking = yes}
				}
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						NOR = {
							has_character_modifier = necromantic_power_1
							has_character_modifier = necromantic_power_2
							has_character_modifier = necromantic_power_3
							has_character_modifier = necromantic_power_4
							has_character_modifier = necromantic_power_5
						}
					}
				}
				add_character_modifier = { name = necromantic_power_3 duration = 240 }
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_1
					}
				}
				add_character_modifier = { name = necromantic_power_4 duration = 240 }
				remove_character_modifier = necromantic_power_1
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_2
						has_character_modifier = necromantic_power_3
						has_character_modifier = necromantic_power_4
					}
				}
				add_character_modifier = { name = necromantic_power_5 duration = 240 }
				remove_character_modifier = necromantic_power_2
				remove_character_modifier = necromantic_power_3
				remove_character_modifier = necromantic_power_4
				break = yes
			}
		#}
	}

	option = { #Consume warpstone cluster
		name = EVTOPTCskavens3
		trigger = {
			has_artifact = warpstone_cluster
		}
		unsafe_destroy_artifact = warpstone_cluster
		#event_target:itemtarget = {
			if = {
				limit = {
					ROOT = {
						NOT = { religion_group = necromantic_group }
					}
				}
				hidden_tooltip = {
					random = {
						chance = 100
						add_trait = addict
					}
					character_event = { id = wh_mutation.200 } #Lunacy Counter
				}
				add_character_modifier = { name = warpstone_5 duration = 365 stacking = yes }
				random = {
					chance = 100
					add_character_modifier = { name = warpstone_frenzy duration = 365 stacking = yes}
				}
				random = {
					chance = 25
					death = {
						death_reason = death_suicide_poison
					}
				}
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						NOR = {
							has_character_modifier = necromantic_power_1
							has_character_modifier = necromantic_power_2
							has_character_modifier = necromantic_power_3
							has_character_modifier = necromantic_power_4
							has_character_modifier = necromantic_power_5
						}
					}
				}
				add_character_modifier = { name = necromantic_power_5 duration = 240 }
				break = yes
			}
			else_if = {
				limit = {
					ROOT = {
						religion_group = necromantic_group
						has_character_modifier = necromantic_power_1
						has_character_modifier = necromantic_power_2
						has_character_modifier = necromantic_power_3
						has_character_modifier = necromantic_power_4
					}
				}
				add_character_modifier = { name = necromantic_power_5 duration = 240 }
				remove_character_modifier = necromantic_power_1
				remove_character_modifier = necromantic_power_2
				remove_character_modifier = necromantic_power_3
				remove_character_modifier = necromantic_power_4
				break = yes
			}
		#}
	}

	option = { #Cancel Decision
		name = "Nevermind"
	}
}
character_event = {
	id = skavens.30002
	hide_window = yes

	is_triggered_only = yes
	immediate = {
		z_magic_lvl_sequential_decrease = yes
	}
}
#cleanup event for burnouts
character_event = {
	id = skavens.30001
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = { limit = { has_character_flag = had_no_magic_power }
			clr_character_flag = had_no_magic_power
			remove_trait = lore_vermin
			z_magic_power_complete_removal = yes
			break = yes
		}
		if = { limit = { has_character_flag = had_magic_power_1 }
			clr_character_flag = had_magic_power_1
			z_magic_power_sequential_subtraction = yes
			break = yes
		}
		if = { limit = { has_character_flag = had_magic_power_2 }
			clr_character_flag = had_magic_power_2
			z_magic_power_sequential_subtraction = yes
			break = yes
		}
		if = { limit = { has_character_flag = had_magic_power_3 }
			clr_character_flag = had_magic_power_3
			z_magic_power_sequential_subtraction = yes
			break = yes
		}
	}
}
#Skaven was a failure and is dead
character_event = {
	id = skavens.4
	desc = EVTDESCskavens4
	picture = GFX_evt_skaven_war

	is_triggered_only = yes

	option = {
		name = EVTOPTAskavens4
	}
}


#On_death for Skaven Grey Seer Succession - First search for designated heir, then random Seer in court, then spawn one if any of the above is not available
character_event = {
	id = skavens.5
	hide_window = yes
	religion_group=horned_rat_god_group
	is_triggered_only = yes
	only_rulers = yes

	trigger = { 
		has_landed_title = k_horned_church
		trait = grey_seer 
	}

	immediate = {
		random_courtier = { character_event = { id = skavens.50002 days = 1 } }
	} 
}

# Inheritance
character_event = {
	id = skavens.50001
	hide_window = yes

	is_triggered_only = yes

	immediate = { 	#if the elected party is of a band, destroy the title.
		any_demesne_title = {
			limit = { mercenary = yes }
			activate_title = { title = THIS status = no }
			destroy_landed_title = THIS
		}
		wealth = FROM
		FROM = { clear_wealth = THIS }
		FROM = { abdicate_to = ROOT }
		FROM = { any_claim = { remove_claim = PREV } }
		any_vassal = { remove_title = title_seer_heir }
		any_courtier = { remove_title = title_seer_heir }
		any_demesne_title = { refill_holding_levy = yes }
		remove_title = title_skink_heir
	}
}

character_event = {
	id = skavens.50002
	hide_window = yes

	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				OR = {
					any_courtier = { has_minor_title = title_seer_heir }
					any_vassal = { has_minor_title = title_seer_heir }
				}
			}
			random_vassal = {
				limit = { has_minor_title = title_seer_heir }
				character_event = { id = skavens.50001 }
				break = yes
			}
			random_courtier = {
				limit = { has_minor_title = title_seer_heir }
				character_event = { id = skavens.50001 }
				break = yes
			}
		}
		if = {
			limit = {
				NOT = { any_courtier = { has_minor_title = title_seer_heir } }
				NOT = { any_vassal = { has_minor_title = title_seer_heir } }
				OR = {
					any_vassal = { trait = grey_seer }
					any_courtier = { trait = grey_seer }
				}
			 }
			random_vassal = {
				limit = { trait = grey_seer }
				character_event = { id = skavens.50001 }
				break = yes
			}
			random_courtier = {
				limit = { trait = grey_seer }
				character_event = { id = skavens.50001 }
				break = yes
			}
		}
		#If none available, create one
		create_random_priest = {
			random_traits = yes
			dynasty = random
			female = no
			culture = skaven_main
			religion = horned_rat
		}
		new_character = {
			set_graphical_culture = skaven_white
			add_trait = creature_skaven
			add_trait = white_skaven
			add_trait = grey_seer
			add_trait = lore_vermin
			z_magic_power_random = yes
			random_list = {
				90 = { add_trait = craven }
				10 = { add_trait = zealous }
			}
			character_event = { id = skavens.50001 }
		}
	}
}
#On_Death Generate Grey-Seers and Pestilence plaguelords
character_event = {
	id = skavens.6
	hide_window = yes

	religion_group=horned_rat_god_group
	only_rulers = yes
	min_age = 16

	is_triggered_only = yes

	trigger = {
		is_theocracy = yes
		trait = creature_skaven
	}

	immediate = {
		random_list = {
			25 = {
				create_character = {
					random_traits = yes
					dynasty = NONE
					religion = ROOT
					culture = ROOT
					female = no
					age = 16
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = no
					age = 22
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = RANDOM
					religion = ROOT
					culture = ROOT
					female = no
					age = 35
				}
			}
			25 = {
				create_character = {
					random_traits = yes
					dynasty = NONE
					religion = ROOT
					culture = ROOT
					female = no
					age = 41
				}
			}
		}
		if = { limit = { NOT = { culture = pestilens } }
			new_character = {
				set_graphical_culture = skaven_white
				add_trait = creature_skaven
				add_trait = white_skaven
				add_trait = grey_seer
				add_trait = lore_vermin
				z_magic_power_random = yes
				random_list = {
					90 = { add_trait = craven }
					10 = { add_trait = zealous }
				}
				character_event = { id = skavens.60001 }
			}
			break = yes
		}
		new_character = {
			add_trait = creature_skaven
			add_trait = plaguelord
			add_trait = lore_vermin
			z_magic_power_random = yes
			random_list = {
				80 = { add_trait = craven }
				20 = { add_trait = zealous }
			}
			character_event = { id = skavens.60001 }
		}
	}
}

# New character receives inheritance
character_event = {
	id = skavens.60001
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { any_demesne_title = { grant_title = ROOT } }
	}
}

#You have a large warpmine and reap the benefits.
character_event = {
	id = skavens.7
	desc = EVTDESCskavens7
	picture = GFX_evt_skaven_caster

	religion_group = horned_rat_god_group


	trigger = { OR = { capital_scope = { any_province_holding = { has_building = ca_warpmine_2 } }
			capital_scope = { any_province_holding = { has_building = ca_warpmine_3 } }
			capital_scope = { any_province_holding = { has_building = ca_warpmine_4 } }
			capital_scope = { any_province_holding = { has_building = ca_warpmine_5 } }
			capital_scope = { any_province_holding = { has_building = ca_warpmine_6 } }
			}
		is_incapacitated_trigger = no
		higher_tier_than = BARON
		 }

	mean_time_to_happen = {
		years = 15
		modifier = {
			factor = 0.85
			capital_scope = { any_province_holding = { has_building = ca_warpmine_3 } }
			}
		modifier = {
			factor = 0.75
			capital_scope = { any_province_holding = { has_building = ca_warpmine_4 } }
			}
		modifier = {
			factor = 0.65
			capital_scope = { any_province_holding = { has_building = ca_warpmine_5 } }
			}
		modifier = {
			factor = 0.5
			capital_scope = { any_province_holding = { has_building = ca_warpmine_6 } }
			}
		}

	option = {
		name = EVTOPTAskavens7
	if = { limit = { has_character_modifier = warpstone_4 }
		remove_character_modifier = warpstone_1
		remove_character_modifier = warpstone_2
		remove_character_modifier = warpstone_3
		remove_character_modifier = warpstone_4
		remove_character_modifier = warpstone_5
		add_character_modifier = { name = warpstone_5 duration = -1 }
		break = yes }
	if = { limit = { has_character_modifier = warpstone_3 }
		remove_character_modifier = warpstone_1
		remove_character_modifier = warpstone_2
		remove_character_modifier = warpstone_3
		remove_character_modifier = warpstone_4
		remove_character_modifier = warpstone_5
		add_character_modifier = { name = warpstone_4 duration = -1 }
		break = yes }
	if = { limit = { has_character_modifier = warpstone_2 }
		remove_character_modifier = warpstone_1
		remove_character_modifier = warpstone_2
		remove_character_modifier = warpstone_3
		remove_character_modifier = warpstone_4
		remove_character_modifier = warpstone_5
		add_character_modifier = { name = warpstone_3 duration = -1 }
		break = yes }
	if = { limit = { has_character_modifier = warpstone_1 }
		remove_character_modifier = warpstone_1
		remove_character_modifier = warpstone_2
		remove_character_modifier = warpstone_3
		remove_character_modifier = warpstone_4
		remove_character_modifier = warpstone_5
		add_character_modifier = { name = warpstone_2 duration = -1 }
		break = yes }
	if = { limit = { NOR = { has_character_modifier = warpstone_1
				has_character_modifier = warpstone_2
				has_character_modifier = warpstone_3
				has_character_modifier = warpstone_4
				has_character_modifier = warpstone_5 } }
		remove_character_modifier = warpstone_1
		remove_character_modifier = warpstone_2
		remove_character_modifier = warpstone_3
		remove_character_modifier = warpstone_4
		remove_character_modifier = warpstone_5
		add_character_modifier = { name = warpstone_1 duration = -1 }
		break = yes }
		hidden_tooltip = { random = { chance = 1
						add_trait = addict } }
	}
	option = {
		name = EVTOPTBskavens7
		ai_chance = { factor = 0 }
	}
}


#if someone in dynasty has 2+ duchy titles. (by-yearly event)
character_event = {
	id = skavens.16
	desc = EVTDESCskavens8
	picture = GFX_evt_skaven_warlord
	
	only_rulers=yes
	religion_group = horned_rat_god_group

	culture_group = skaven_group
	min_age = 16
	only_independent=no
	only_men=yes
	capable_only=yes
	is_triggered_only = yes

	trigger = {
		lower_tier_than = DUKE
		trait = creature_skaven
		liege = {
			trait = creature_skaven
			num_of_duke_titles = 2
			higher_tier_than = DUKE
		}
		NOT={trait=content}
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 10
			trait = ambitious
		}
		modifier = {
			factor = 5
			trait = proud
		}
		modifier = {
			factor = 0.8
			trait = stressed
		}
		modifier = {
			factor = 0.8
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = lunatic_3
		}
		modifier = {
			factor = 0.75
			trait = lunatic_2
		}
		modifier = {
			factor = 0.95
			trait = lunatic_1
		}
		modifier = {
			factor = 0.75
			trait = possessed
		}
		modifier = {
			factor = 0.9
			trait = ill
		}
		modifier = {
			factor = 0.8
			trait = pneumonic
		}
		modifier = {
			factor = 0.8
			trait = syphilitic
		}
		modifier = {
			factor = 0.5
			trait = leper
		}
		modifier = {
			factor = 0.9
			trait = wounded
		}
		modifier = {
			factor = 0.8
			trait = maimed
		}
		modifier = {
			factor = 0.5
			trait = infirm
		}
		modifier = {
			factor = 0.5
			is_ill = yes
		}
	}

	option = {
		name = EVTOPTAskavens8
		liege = { character_event = { id = skavens.17 days = 1 tooltip = EVTTOOLTIP66051 } }
	}
	option = {
		name = EVTOPTBskavens8
		trigger = { ai = no }
	}
}

character_event = {
	id = skavens.17
	desc = EVTDESCskavens8001
	picture = GFX_evt_skaven_warlord

	is_triggered_only = yes

	immediate={
		capital_scope = { duchy={ save_event_target_as = capital_duchy }}
		random_demesne_title={
			limit={
				tier = DUKE
				owner={character=root}
				kingdom={NOT={title=event_target:capital_kingdom}}
			}
			save_event_target_as=title_count
		}
	}
	option = {
		name = EVTOPTAskavens8001
		trigger = { num_of_duke_titles = 2 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				from = { diplomacy = 14 }
			}
			modifier = {
				factor = 2
				from = { martial = 14 }
			}
			modifier = {
				factor = 2
				from = { intrigue = 14 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = from value =  25 }
			}
			modifier = {
				factor = 2
				opinion = { who = from value =  50 }
			}
			modifier = {
				factor = 3
				opinion = { who = from value =  75 }
			}
		}
		prestige = -5
		FROM = { character_event = { id = skavens.8002 } }
		event_target:title_count = {
			grant_title = FROM
		}

	}

	option = {
		name = EVTOPTBskavens8001
		trigger = { num_of_duke_titles = 2 }
		FROM = { character_event = { id = skavens.19 } }
		capital_scope = { add_province_modifier = { name = skaven_unoptimized_demesne duration = 950 stacking = yes } }
		FROM = {
			opinion = {
				modifier = dynastic_refused_title
				who = ROOT
				years = 100
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				opinion = { who = from value =  80 }
			}
		}
	}
	option = {
		name = EVTOPTCskavens90001
		trigger = { NOT = { num_of_duke_titles = 2 } }
		FROM = { character_event = { id = skavens.19 } }
	}
}

character_event = {
    id = skavens.18
    desc = EVTDESCskavens8002
    picture = GFX_evt_skaven_warlord

	is_triggered_only = yes

	option = {
	name = EVTOPTAskavens8002
	}
}

character_event = {
    id = skavens.19
    desc = EVTDESCskavens8003
    picture = GFX_evt_skaven_warlord

	is_triggered_only = yes

	option = {
	name = EVTOPTAskavens8003
	}
}

#if ruler has 3+ county titles. (by-yearly event)
character_event = {
	id = skavens.20
	desc = EVTDESCskavens9
	picture = GFX_evt_skaven_warlord

	religion_group = horned_rat_god_group
	culture_group=skaven_group
	min_age = 16
	only_independent=no
	only_men=yes
	only_capable = yes

	is_triggered_only = yes

	trigger = {
		OR = { has_landed_title = no
			lower_tier_than = DUKE 
		}
		trait = creature_skaven
		liege = { 
			trait = creature_skaven
			num_of_count_titles = 3
			higher_tier_than = COUNT 
		}
		NOT = { trait = content }
	}

	weight_multiplier = {
		days = 1
		modifier = {
			factor = 10
			trait = ambitious
		}
		modifier = {
			factor = 2
			liege = { num_of_count_titles = 5 }
		}
		modifier = {
			factor = 2
			liege = { num_of_count_titles = 8 }
		}
		modifier = {
			factor = 2
			liege = { num_of_count_titles = 10 }
		}
		modifier = {
			factor = 5
			trait = proud
		}
		modifier = {
			factor = 0.8
			trait = stressed
		}
		modifier = {
			factor = 0.8
			trait = depressed
		}
		modifier = {
			factor = 0.5
			trait = lunatic_3
		}
		modifier = {
			factor = 0.75
			trait = lunatic_2
		}
		modifier = {
			factor = 0.95
			trait = lunatic_1
		}
		modifier = {
			factor = 0.75
			trait = possessed
		}
		modifier = {
			factor = 0.9
			trait = ill
		}
		modifier = {
			factor = 0.8
			trait = pneumonic
		}
		modifier = {
			factor = 0.8
			trait = syphilitic
		}
		modifier = {
			factor = 0.5
			trait = leper
		}
		modifier = {
			factor = 0.9
			trait = wounded
		}
		modifier = {
			factor = 0.8
			trait = maimed
		}
		modifier = {
			factor = 0.5
			trait = infirm
		}
		modifier = {
			factor = 0.5
			trait = drunkard
		}
		modifier = {
			factor = 0.5
            trait = craven
		}
		modifier = {
			factor = 0.5
			is_ill = yes
		}
	}

	option = {
		name = EVTOPTAskavens9
		liege = { character_event = { id = skavens.21 days = 1 tooltip = EVTTOOLTIP66051 } }
	}
	option = {
		name = EVTOPTBskavens9
		capital_scope = { add_province_modifier = { name = skaven_unoptimized_demesne duration = 1250 stacking = yes } }
		trigger = { ai = no }
	}
}

character_event = {
	id = skavens.21
	desc = EVTDESCskavens90001
	picture = GFX_evt_skaven_warlord

	is_triggered_only = yes
	immediate={
		capital_scope = { duchy={ save_event_target_as = capital_duchy }}
		capital_scope = { kingdom={ save_event_target_as = capital_kingdom }}
		if={limit={
				higher_tier_than=COUNT
				any_demesne_title = {
					tier = COUNT
					owner={character=root}
					kingdom={NOT={title=event_target:capital_kingdom}}
				}
			}
			random_demesne_title={
				limit={
					tier = COUNT
					owner={character=root}
					kingdom={NOT={title=event_target:capital_kingdom}}
				}
				save_event_target_as=title_count_non_capital_kingdom
			}
		}
		if={limit={
				higher_tier_than=COUNT
				any_demesne_title = {
					tier = COUNT
					owner={character=root}
					dejure_liege_title={NOT={title=event_target:capital_duchy}}
				}
			}
			random_demesne_title={
				limit={
					tier = COUNT
					owner={character=root}
					dejure_liege_title={NOT={title=event_target:capital_duchy}}
				}
				save_event_target_as=title_count_non_capital
			}
		}
		random_demesne_title={
			limit={
				owner={character=root}
				tier = COUNT
				NOT = { is_primary_holder_title = yes }
			}
			save_event_target_as=title_count
		}
	}
	#no need for notifactions back, landless character gets it anyway.
	option = {
		name = EVTOPTskavens90001A
		trigger = { num_of_count_titles = 3 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				from = { diplomacy = 14 }
			}
			modifier = {
				factor = 2
				from = { martial = 14 }
			}
			modifier = {
				factor = 2
				from = { intrigue = 14 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = from value =  25 }
			}
			modifier = {
				factor = 2
				opinion = { who = from value =  50 }
			}
			modifier = {
				factor = 3
				opinion = { who = from value =  75 }
			}
		}
		prestige = -5
		FROM = { character_event = { id = skavens.18 } }
		event_target:title_count = {
			grant_title = FROM
		}
	}
	option = {
		name = EVTOPTskavens90001B
		trigger = { 
			num_of_count_titles = 3
			higher_tier_than=COUNT
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				from = { diplomacy = 14 }
			}
			modifier = {
				factor = 2
				from = { martial = 14 }
			}
			modifier = {
				factor = 2
				from = { intrigue = 14 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = from value =  25 }
			}
			modifier = {
				factor = 2
				opinion = { who = from value =  50 }
			}
			modifier = {
				factor = 3
				opinion = { who = from value =  75 }
			}
		}
		prestige = -5
		FROM = { character_event = { id = skavens.18 } }
		if={limit={event_target:title_count_non_capital_kingdom = { always = yes }}
			event_target:title_count_non_capital_kingdom = {
				grant_title = FROM
			}
		}
		else_if={limit={event_target:title_count_non_capital = { always = yes }}
			event_target:title_count_non_capital = {
				grant_title = FROM
			}
		}
		else={
			event_target:title_count = {
				grant_title = FROM
			}
		}
	}
	option = {
		name = EVTOPTBskavens90001
		trigger = { num_of_count_titles = 3 }
		FROM = { character_event = { id = skavens.19 } }
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				opinion = { who = from value =  80 }
			}
		}
		FROM = {
			opinion = {
				modifier = dynastic_refused_title
				who = ROOT
				years = 100
			}
		}
		if={
			limit={
				FROM={is_ruler = no}
				OR={
					trait=cruel
					trait=wroth
					trait=impaler
					FROM={
						reverse_has_opinion_modifier  = {
							modifier = dynastic_refused_title
							who = ROOT
						}
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_rebel_traitor
				months=12
			}
		}
		else_if={
			limit={
				FROM={is_ruler = yes}
				OR={
					trait=impaler
					FROM={
						reverse_has_opinion_modifier  = {
							modifier = dynastic_refused_title
							who = ROOT
						}
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_charge_deviant
				months=12
			}
		}
	}

	option = {
		name = EVTOPTCskavens90001
		trigger = { NOT = { num_of_count_titles = 3 } }
		FROM = { character_event = { id = skavens.19 } }
	}
}
