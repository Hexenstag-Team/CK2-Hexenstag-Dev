namespace = DoWA
##Written By
#Deadly 1-200
character_event = { # Pirates/Corsairs/Norscans Pillage a Holding
	id = DoWA.1
	desc = EVTDESC_DoWA_1
	border = GFX_event_normal_frame_war
	portrait = event_target:top_liege_target
    picture = {
        picture = GFX_evt_norscan_raid
        trigger = {
			culture_group = norscan_group
			NOR={
				religion = nurgle
				religion = slaanesh
				religion = tzeentch
				religion = chaos
				religion = khorne
			}
        }
    }
    picture = {
        picture = GFX_evt_ogre_raiders
        trigger = {
			culture_group = ogre_group
        }
    }
    picture = {
        picture = GFX_evt_pirate_crew
        trigger = {
           #OR = {
				government = pirate_government
		   #	government = druchii_group
           #}
        }
    }
    picture = {
        picture = GFX_evt_questing_ocean
        trigger = {
			culture_group = druchi_group
        }
    }
    picture = {
        picture = GFX_evt_mongols_pillage_oldgods
        trigger = {
			NOR = {
				government = pirate_government
				culture_group = druchi_group
				culture_group = norscan_group
            }
        }
    }
	is_triggered_only = yes

	trigger = {
		OR={
			AND={
				culture_group = norscan_group
				OR={
					NOT={religion_group=chaos_gods_group}
					religion=norscan_gods
				}
			}
			government = pirate_government
			culture_group = druchi_group
			culture_group = ogre_group
		}
		FROM = {
			OR = {
				holding_type = city
				holding_type = temple
				holding_type = castle
				holding_type = tribal
			}
			num_of_buildings = 4
			location = {NOT = { has_province_modifier = slaves_taken }}
		}
	}

	immediate = {
		holder_scope = {
			save_event_target_as = holder_target
			top_liege = {
				save_event_target_as = top_liege_target
			}
		}
	}

	option = {
		name = EVTOPTA_HL_4813
		show_portrait = event_target:holder_target
		show_portrait = event_target:top_liege_target
		ai_chance = {
			factor = 95
		}
		if={limit={from={holding_type=city}}
			wealth = 30
			custom_tooltip = {
				text = gain_tech_custom_tooltip
				hidden_tooltip = {
					random_list = {
						10 = { military_techpoints = 5 }
						10 = { economy_techpoints = 5 }
						10 = { culture_techpoints = 5 }
					}
				}
			}
			random={
				chance = 10
				if = {
					limit = {
						FROM = {
							OR = {
								culture_group = amazon_group
								culture_group = arabyan_group
								culture_group = bretonnian_group
								culture_group = estalian_group
								culture_group = imperial_group
								culture_group = kislevite_group
								culture_group = norscan_group
								culture_group = tilean_group
								culture_group = oriental_group
								culture_group = albion_group
								culture_group = hung_group
								culture_group = kurgan_group
								culture_group = lahmian_group
								culture_group = strigany_group
								culture_group = sartosan_group
								culture_group = southlander_group
							}
						}
					}
					change_variable = { which = humanslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
				if = {
					limit = {
						FROM = {
							OR = {
							culture_group = dwarf_group
							culture_group = dawi_zharr_group
							}
						}
					}
					change_variable = { which = dwarfslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
				if = {
					limit = {
						FROM = {
							OR = {
							culture_group = asrai_group
							culture_group = asur_group
							culture_group = druchi_group
							}
						}
					}
					change_variable = { which = elfslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
			}
		}
		if = {
			limit = { NOR = { 
				FROM = { holding_type = tribal } 
				FROM = { holding_type = city }
			} }
			wealth = 15
		}
		if = {
			limit = { FROM = { holding_type = tribal } }
			wealth = 5
			random_list={
				30={
				}
				30={
					modifier = {
						factor = 2
						culture_group=druchi_group
						FROM={
							NOR={
								culture_group=druchi_group
								culture_group=asrai_group
								culture_group=asur_group
							}
						}
					}
					modifier = {
						factor = 1.5
						culture_group=norscan_group
						FROM={
							NOR={
								culture_group=druchi_group
								culture_group=asrai_group
								culture_group=asur_group
							}
						}
					}
					modifier = {
						factor = 1.5
						culture_group=norscan_group
						FROM={
							NOR={
								culture_group=druchi_group
								culture_group=asrai_group
								culture_group=asur_group
							}
						}
					}
					modifier = {
						factor = 0.8
						FROM={
							OR={
								culture_group=druchi_group
								culture_group=asrai_group
								culture_group=asur_group
							}
						}
					}
					if = {
						limit = {
							FROM = {
								OR = {
									culture_group = amazon_group
									culture_group = arabyan_group
									culture_group = bretonnian_group
									culture_group = estalian_group
									culture_group = imperial_group
									culture_group = kislevite_group
									culture_group = norscan_group
									culture_group = tilean_group
									culture_group = oriental_group
									culture_group = albion_group
									culture_group = hung_group
									culture_group = kurgan_group
									culture_group = lahmian_group
									culture_group = strigany_group
									culture_group = sartosan_group
									culture_group = southlander_group
								}
							}
						}
						change_variable = { which = humanslaves value = 1 }
						FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
					}
					if = {
						limit = {
							FROM = {
								OR = {
								culture_group = dwarf_group
								culture_group = dawi_zharr_group
								}
							}
						}
						change_variable = { which = dwarfslaves value = 1 }
						FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
					}
					if = {
						limit = {
							FROM = {
								OR = {
								culture_group = asrai_group
								culture_group = asur_group
								culture_group = druchi_group
								}
							}
						}
						change_variable = { which = elfslaves value = 1 }
						FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
					}
				}
			}
		}
		FROM = {
			destroy_random_building = THIS
			holder_scope = {
				show_scope_change = no
				opinion = {
					modifier = opinion_furious
					who = ROOT
					years = 3
				}
				top_liege = {
				show_scope_change = no
					opinion = {
						modifier = opinion_furious
						who = ROOT
						years = 3
					}
				}
			}
		}
	}

	option = {
		name = ROUND_THEM_UP
		random_list={
			30={
			}
			60={
				modifier = {
					factor = 1.5
					culture_group=druchi_group
					FROM={
						NOR={
							culture_group=druchi_group
							culture_group=asrai_group
							culture_group=asur_group
						}
					}
				}
				modifier = {
					factor = 1.2
					culture_group=norscan_group
					FROM={
						NOR={
							culture_group=druchi_group
							culture_group=asrai_group
							culture_group=asur_group
						}
					}
				}
				modifier = {
					factor = 1.3
					culture_group=norscan_group
					FROM={
						NOR={
							culture_group=druchi_group
							culture_group=asrai_group
							culture_group=asur_group
						}
					}
				}
				modifier = {
					factor = 0.5
					FROM={
						OR={
							culture_group=druchi_group
							culture_group=asrai_group
							culture_group=asur_group
						}
					}
				}
				if = {
					limit = {
						FROM = {
							OR = {
								culture_group = amazon_group
								culture_group = arabyan_group
								culture_group = bretonnian_group
								culture_group = estalian_group
								culture_group = imperial_group
								culture_group = kislevite_group
								culture_group = norscan_group
								culture_group = tilean_group
								culture_group = oriental_group
								culture_group = albion_group
								culture_group = hung_group
								culture_group = kurgan_group
								culture_group = lahmian_group
								culture_group = strigany_group
								culture_group = sartosan_group
								culture_group = southlander_group
							}
						}
					}
					change_variable = { which = humanslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
				if = {
					limit = {
						FROM = {
							OR = {
							culture_group = dwarf_group
							culture_group = dawi_zharr_group
							}
						}
					}
					change_variable = { which = dwarfslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
				if = {
					limit = {
						FROM = {
							OR = {
							culture_group = asrai_group
							culture_group = asur_group
							culture_group = druchi_group
							}
						}
					}
					change_variable = { which = elfslaves value = 1 }
					FROM = { add_province_modifier = { name = slaves_taken duration = 1835 } }
				}
			}
		}
		ai_chance = {
			factor = 5
		}
		FROM = {
			holder_scope = {
				random_courtier = {
					limit = {
						location={province=FROM}
					}
					random_list = {
						30 = {
							imprison = ROOT
						}
						30 = { 
							if = {
								limit = { is_invincible_trigger = yes }
								antideath_effect = yes
								break = yes
							}
							death = {
								death_reason = death_murder
								killer = ROOT
							}
						}
						40={}
					}
				}
				if = {
					limit = {
						location={province=FROM}
					}
					random = {
						chance = 50
						imprison = ROOT
					}
				}
			}
		}
	}
}
#A building was destroyed during the siege of [From.From.GetName].
character_event = {
	id = DoWA.2
	desc = EVTDESCchaosR1500
	picture = GFX_evt_siege
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	hide_window = yes
	trigger = {
		OR={
			AND={
				culture_group = norscan_group
				OR={
					NOT={religion_group=chaos_gods_group}
					religion=norscan_gods
				}
			}
			government = pirate_government
			culture_group = druchi_group
			culture_group = ogre_group
		}
		FROM = {
			OR = {
				holding_type = city
				holding_type = temple
				holding_type = castle
				holding_type = tribal
			}
			location = {has_province_modifier = slaves_taken}
			OR={
				location = {NOT={has_province_modifier = recently_burnt_the_land_not_owner}} #Completly Exhausted Province
				ROOT={culture_group = norscan_group} #Exception to be able to Raze
				ROOT={culture_group = druchi_group} #Exception to be able to Raze
			}
			has_any_building = yes
			NOT = { has_holding_modifier = sacked }
			NOT = { has_holding_modifier = burned }
		}
	}
	immediate = {
		holder_scope = {
			save_event_target_as = holder_target
			top_liege = {
				save_event_target_as = top_liege_target
			}
		}
		character_event = {
			id = DoWA.3
			days = 1
		}
	}
	option = {
		name = CURSES
	}
}
character_event = { # Pirates/Corsairs/Norscans Pillage a Holding
	id = DoWA.3
	desc = EVTDESCchaosR1500
	picture = GFX_evt_siege
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	hide_from = yes
	notification = yes

	immediate = {
		FROM = {
			location = {
				add_province_modifier = {
					name = recently_burnt_the_land_not_owner
					years = 10
				}
			}
		}
	}

	immediate = {
		FROMFROM = {
			destroy_random_building = yes
			add_holding_modifier = {
				modifier = sacked
				months = 12
			}
		}
		add_doom_progress_tiny_effect = yes
	}
	option = {
		name = CURSES
	}
}