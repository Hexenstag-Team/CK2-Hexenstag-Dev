society_decisions = {
	request_whunter_weapon = {
		ai_check_interval = 46
		only_playable=yes
		potential = {
			is_state_witch_hunter_trigger=yes
			NOT = { has_artifact = witch_hunter_rapier }
		}

		allow = {
			society_currency >= 500
		}

		effect = {
			change_society_currency=-500
			add_artifact=witch_hunter_rapier
		}

		ai_will_do = {
			factor = 1
		}
	}
}

decisions = {
	grant_title_witch_hunter = {
		ai_check_interval = 36
		only_rulers=yes
		potential = {
			ai = yes
			can_grant_title = title_court_witchhunter
			any_courtier={
				trait=witch_hunter
			}
		}

		allow = {
		}

		effect = {
			random_courtier = {
				limit = {
					can_hold_title_witch_hunter = yes
				}
				give_minor_title = title_court_witchhunter
			}

		}

		ai_will_do = {
			factor = 1
		}
	}
}

title_decisions = {
	scour_barony = {
		is_in_society = yes # Note - Only works for targeted_decisions. For non-targeted decisions you can use "society_decisions"
		filter = all
		ai_target_filter=all
		ai_check_interval = 36
		from_potential = {
			is_state_witch_hunter_trigger = yes
			society_rank = 3
			trait = witch_hunter
			NOT = { trait = incapable }
			AND = { is_landed = yes
				higher_tier_than = BARON }
			any_courtier = { trait = witch_hunter
					is_ruler = no }
		}
		potential = {
			tier = COUNT
			owner = { religion_group = old_world_group }
			NOR = {
				owner = { has_character_modifier = expelled_k_witch_hunters_order }
				owner = {top_liege={ has_character_modifier = expelled_k_witch_hunters_order }}
			}
			NOT = { owner = { has_character_modifier = recent_whunter_request } }
		}
		allow = {
			from={
				society={
					any_society_member ={
						is_landed = no
						NOT={distance={ who = FROM value=500}}
						NOT = { trait = on_witch_hunt }
						NOT={ has_character_flag = recently_returned }
						custom_tooltip={
							text=cannot_order_from_court_of_grandmaster_TT
							OR={
								FROM={ #Cant Order from Within Direct court of the Kween
									society_rank == 4
								}
								NOT={
									employer={
										society_member_of = PREV
										society_rank = 4
									}
								}
							}
						}
					}
				}
				society_currency >= 100
			}
			location = { is_within_diplo_range = FROM }
		}
		effect = {
			change_variable = {
				which = global_debug_witch_count
				value = 1  # increase by 1 for every instance of scope
			}
			FROM={change_society_currency=-100}
			owner = { add_character_modifier = { name = recent_whunter_request duration = 1650 hidden = yes } }
			hidden_tooltip = { location = { province_event = { id = swhunters.26 days = 5 random = 4 } } }
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			modifier = {
				factor = 0.6 # Less likely to do it
			}
			modifier = {
				factor = 2
				location={
					OR = {
						has_province_modifier = nurgle_province_disease
						has_province_modifier = beastmen_unrest
						has_province_modifier = warpdust_traces
						has_province_modifier = slaanesh_hedonism
						has_province_modifier = warpstone_meteor
						has_province_modifier = lahmian_presence
					}
				}
			}
			modifier = {
				factor = 1.5
				owner={
					reverse_opinion={
						who=FROM
						value>=20
					}
				}
			}
			modifier = {
				factor = 1.5
				from={trait=diligent}
			}
			modifier = {
				factor = 1.5
				from={trait=impaler}
			}
			modifier = {
				factor = 1.5
				from={trait=cruel}
			}
		}
	}
}
