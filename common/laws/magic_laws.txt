# Laws ending with 0 will be default laws at game start
law_groups = {
	magic_law = {
		law_type = realm
	}
	witch_hunter_law = {
		law_type = realm
	}
}

laws = {
	magic_law_0 = {
		group = magic_law
		allow = {
			holder_scope = {
				magic_law_0_allow = yes
			}
			NOT = { has_law = magic_law_2 }
			NOT = { has_law = magic_law_3 }
		}
		default_selection = {
			factor = 0
			additive_modifier = {
				value = 10
				holder_scope = {
					NOT = { culture_group = tilean_group }
				}
			}
		}
		potential = {
			holder_scope = {
				magic_law_potential = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = yes
				}
			}
			modifier = {
				factor = 0.8
				holder_scope = {
					hates_legal_magic = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = no
					hates_legal_magic = no
				}
			}
		}

		pass_effect = {
			holder_scope = {
				magic_law_pass_effect = yes
			}
		}
		effect = {
			hidden_tooltip = {
				revoke_law = magic_law_2
				revoke_law = magic_law_1
				revoke_law = magic_law_3
			}
			holder_scope = {
				if = {
					limit = {
						has_magic_law_any = yes
					}
					#Has to be done this way to get the UI updating correctly with the costs, the actual costs of the law are controlled by trigger_magic_law_cost,
					#otherwise the law effect triggers everytime you get new land
					magic_law_costs_effect = yes
					hidden_tooltip = { magic_law_costs_refund_effect = yes }
					magic_law_effect = yes
				}
			}
		}
	}
	magic_law_1 = {
		group = magic_law
		allow = {
			holder_scope = {
				magic_law_1_and_above_allow = yes
			}
			OR = {
				has_law = magic_law_0
				has_law = magic_law_2
			}
			#For when no law is set, only allow them to pick basic law
			has_magic_law_any = yes
		}
		potential = {
			holder_scope = {
				magic_law_potential = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.8
				holder_scope = {
					supports_legal_magic = yes
					has_magic_law_0 = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = yes
					has_magic_law_2 = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					hates_legal_magic = yes
					has_magic_law_0 = yes
				}
			}
			modifier = {
				factor = 0.8
				holder_scope = {
					hates_legal_magic = yes
					has_magic_law_2 = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = no
					hates_legal_magic = no
				}
			}
		}
		pass_effect = {
			holder_scope = {
				magic_law_pass_effect = yes
			}
		}
		effect = {
			hidden_tooltip = {
				revoke_law = magic_law_0
				revoke_law = magic_law_2
				revoke_law = magic_law_3
			}
			holder_scope = {
				if = {
					limit = {
						has_magic_law_any = yes
					}
					#Has to be done this way to get the UI updating correctly with the costs, the actual costs of the law are controlled by trigger_magic_law_cost,
					#otherwise the law effect triggers everytime you get new land
					magic_law_costs_effect = yes
					hidden_tooltip = { magic_law_costs_refund_effect = yes }
					magic_law_effect = yes
				}
			}
		}
	}
	magic_law_2 = {
		group = magic_law
		allow = {
			holder_scope = {
				magic_law_1_and_above_allow = yes
			}
			NOT = { has_law = magic_law_0 }
			NOT = { has_law = magic_law_3 }
			#For when no law is set, only allow them to pick basic law
			has_magic_law_any = yes
		}
		default_selection = {
			factor = 0
			additive_modifier = {
				value = 10
				holder_scope = {
					culture_group = tilean_group
				}
			}
			#modifier = {
			#	factor = 5
			#	has_global_flag = magic_legal_old_world_50_years
			#}
		}
		potential = {
			holder_scope = {
				magic_law_potential = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.8
				holder_scope = {
					supports_legal_magic = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					hates_legal_magic = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = no
					hates_legal_magic = no
				}
			}
		}

		pass_effect = {
			holder_scope = {
				magic_law_pass_effect = yes
			}
		}
		effect = {
			hidden_tooltip = {
				revoke_law = magic_law_0
				revoke_law = magic_law_1
				revoke_law = magic_law_3
			}
			holder_scope = {
				if = {
					limit = {
						has_magic_law_any = yes
					}
					#Has to be done this way to get the UI updating correctly with the costs, the actual costs of the law are controlled by trigger_magic_law_cost,
					#otherwise the law effect triggers everytime you get new land
					magic_law_costs_effect = yes
					hidden_tooltip = { magic_law_costs_refund_effect = yes }
					magic_law_effect = yes
				}
			}
		}
	}
	magic_law_3 = {
		group = magic_law
		allow = {
			has_global_flag = first_college_of_magic_active
			holder_scope = {
				magic_law_1_and_above_allow = yes
			}
			has_law = magic_law_2
			#For when no law is set, only allow them to pick basic law
			has_magic_law_any = yes
		}
		default_selection = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { has_global_flag = magic_legal_old_world_50_years }
			}
			modifier = {
				factor = 5
				has_global_flag = magic_legal_old_world_50_years
			}
		}
		potential = {
			holder_scope = {
				magic_law_potential = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.8
				holder_scope = {
					supports_legal_magic = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					hates_legal_magic = yes
				}
			}
			modifier = {
				factor = 0
				holder_scope = {
					supports_legal_magic = no
					hates_legal_magic = no
				}
			}
		}

		pass_effect = {
			#No problems passing this law.
		}
		effect = {
			hidden_tooltip = {
				revoke_law = magic_law_0
				revoke_law = magic_law_1
				revoke_law = magic_law_2
			}
			holder_scope = {

			}
		}
	}
	#Traditional authority
	witch_hunter_law_0 = {
		group = witch_hunter_law
		default_selection = {
			factor = 0
			additive_modifier = {
				value = 10
				holder_scope = {
					culture_group = bretonnian_group
				}
			}
		}
		potential = {
			holder_scope = {
				religion_group = old_world_group
				NOT = { religion = old_faith }
			}
		}
		allow = {
			NOR = {
				has_law = witch_hunter_law_2
				has_law = witch_hunter_law_3
				is_doom_high = yes
				is_doom_very_high = yes
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 5
				holder_scope = {
					ai_greed >= 50
				}
			}
			modifier = {
				factor = 2
				is_doom_very_low = yes
			}
			modifier = {
				factor = 2
				holder_scope = {
					culture_group = bretonnian_group
				}
			}
			modifier = {
				factor = 0.5
				holder_scope = {
					culture_group = kislevite_group
				}
			}
		}
		ai_will_revoke = {
			factor = 0
		}
		effect = {
			hidden_tooltip = {
				revoke_law = witch_hunter_law_1
				revoke_law = witch_hunter_law_2
				revoke_law = witch_hunter_law_3
			}
		}
		global_revolt_risk = -0.01
	}
	#Specialist hunters
	witch_hunter_law_1 = {
		group = witch_hunter_law
		default_selection = {
			factor = 0
			additive_modifier = {
				value = 10
				holder_scope = {
					OR = {
						culture_group = imperial_group
						culture_group = tilean_group
					}
				}
			}
		}
		potential = {
			holder_scope = {
				religion_group = old_world_group
				NOT = { religion = old_faith }
			}
		}
		allow = {
			NOT = {
				has_law = witch_hunter_law_3
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 5
				holder_scope = {
					ai_rationality >= 50
				}
			}
			modifier = {
				factor = 2
				holder_scope = {
					culture_group = bretonnian_group
				}
			}
			modifier = {
				factor = 0.5
				holder_scope = {
					culture_group = kislevite_group
				}
			}
		}
		ai_will_revoke = {
			factor = 0
		}
		effect = {
			hidden_tooltip = {
				revoke_law = witch_hunter_law_0
				revoke_law = witch_hunter_law_2
				revoke_law = witch_hunter_law_3
			}
		}
	}
	#State Inquisition
	witch_hunter_law_2 = {
		group = witch_hunter_law
		default_selection = {
			factor = 0
			additive_modifier = {
				value = 10
				holder_scope = {
					OR = {
						culture_group = estalian_group
						culture_group = kislevite_group
					}
				}
			}
		}
		potential = {
			holder_scope = {
				religion_group = old_world_group
				NOT = { religion = old_faith }
			}
		}
		allow = {
			NOT = {
				has_law = witch_hunter_law_0
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 5
				holder_scope = {
					ai_zeal >= 50
				}
			}
			modifier = {
				factor = 2
				OR = {
					is_doom_high = yes
					is_doom_very_high = yes
				}
			}
			modifier = {
				factor = 5
				holder_scope = {
					culture_group = kislevite_group
				}
			}
		}
		ai_will_revoke = {
			factor = 0
		}
		effect = {
			hidden_tooltip = {
				revoke_law = witch_hunter_law_0
				revoke_law = witch_hunter_law_1
				revoke_law = witch_hunter_law_3
			}
		}
		arrest_chance_modifier = 0.05
		vassal_limit = -5
	}
	#Emergency measures
	witch_hunter_law_3 = {
		group = witch_hunter_law
		default_selection = {
			factor = 0
		}
		potential = {
			holder_scope = {
				religion_group = old_world_group
				NOT = { religion = old_faith }
			}
		}
		allow = {
			NOT = {
				has_law = witch_hunter_law_0
			}
			OR = {
				is_doom_high = yes
				is_doom_very_high = yes
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			modifier = {
				factor = 0.1
				NOT = {	is_doom_very_high = yes }
			}
			modifier = {
				factor = 2
				holder_scope = {
					culture_group = kislevite_group
				}
			}
		}
		ai_will_revoke = {
			factor = 0
		}
		effect = {
			hidden_tooltip = {
				revoke_law = witch_hunter_law_0
				revoke_law = witch_hunter_law_1
				revoke_law = witch_hunter_law_2
			}
		}
		arrest_chance_modifier = 0.20
		global_revolt_risk = 0.02
		vassal_limit = -5
	}
}
